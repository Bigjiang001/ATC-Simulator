(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function En(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const W={},ct=[],Le=()=>{},Bs=()=>!1,en=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Hn=e=>e.startsWith("onUpdate:"),ae=Object.assign,Nn=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Gs=Object.prototype.hasOwnProperty,Y=(e,t)=>Gs.call(e,t),L=Array.isArray,ut=e=>$t(e)==="[object Map]",tn=e=>$t(e)==="[object Set]",ei=e=>$t(e)==="[object Date]",O=e=>typeof e=="function",Q=e=>typeof e=="string",Ie=e=>typeof e=="symbol",z=e=>e!==null&&typeof e=="object",Fi=e=>(z(e)||O(e))&&O(e.then)&&O(e.catch),Di=Object.prototype.toString,$t=e=>Di.call(e),Ys=e=>$t(e).slice(8,-1),$i=e=>$t(e)==="[object Object]",kn=e=>Q(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,At=En(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nn=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Vs=/-(\w)/g,We=nn(e=>e.replace(Vs,(t,n)=>n?n.toUpperCase():"")),Us=/\B([A-Z])/g,st=nn(e=>e.replace(Us,"-$1").toLowerCase()),Oi=nn(e=>e.charAt(0).toUpperCase()+e.slice(1)),hn=nn(e=>e?`on${Oi(e)}`:""),tt=(e,t)=>!Object.is(e,t),Yt=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ei=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Hi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ti;const sn=()=>ti||(ti=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bn(e){if(L(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=Q(i)?js(i):Bn(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(Q(e)||z(e))return e}const Ks=/;(?![^(]*\))/g,Ws=/:([^]+)/,Xs=/\/\*[^]*?\*\//g;function js(e){const t={};return e.replace(Xs,"").split(Ks).forEach(n=>{if(n){const i=n.split(Ws);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function et(e){let t="";if(Q(e))t=e;else if(L(e))for(let n=0;n<e.length;n++){const i=et(e[n]);i&&(t+=i+" ")}else if(z(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const qs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zs=En(qs);function Ni(e){return!!e||e===""}function Js(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=rn(e[i],t[i]);return n}function rn(e,t){if(e===t)return!0;let n=ei(e),i=ei(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Ie(e),i=Ie(t),n||i)return e===t;if(n=L(e),i=L(t),n||i)return n&&i?Js(e,t):!1;if(n=z(e),i=z(t),n||i){if(!n||!i)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const o in e){const l=e.hasOwnProperty(o),a=t.hasOwnProperty(o);if(l&&!a||!l&&a||!rn(e[o],t[o]))return!1}}return String(e)===String(t)}function Qs(e,t){return e.findIndex(n=>rn(n,t))}const ki=e=>!!(e&&e.__v_isRef===!0),Vt=e=>Q(e)?e:e==null?"":L(e)||z(e)&&(e.toString===Di||!O(e.toString))?ki(e)?Vt(e.value):JSON.stringify(e,Bi,2):String(e),Bi=(e,t)=>ki(t)?Bi(e,t.value):ut(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s],r)=>(n[gn(i,r)+" =>"]=s,n),{})}:tn(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>gn(n))}:Ie(t)?gn(t):z(t)&&!L(t)&&!$i(t)?String(t):t,gn=(e,t="")=>{var n;return Ie(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ge;class Zs{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ge,!t&&ge&&(this.index=(ge.scopes||(ge.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ge;try{return ge=this,t()}finally{ge=n}}}on(){ge=this}off(){ge=this.parent}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function er(){return ge}let q;const pn=new WeakSet;class Gi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ge&&ge.active&&ge.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pn.has(this)&&(pn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Vi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ni(this),Ui(this);const t=q,n=ve;q=this,ve=!0;try{return this.fn()}finally{Ki(this),q=t,ve=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Vn(t);this.deps=this.depsTail=void 0,ni(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cn(this)&&this.run()}get dirty(){return Cn(this)}}let Yi=0,Pt,Ct;function Vi(e,t=!1){if(e.flags|=8,t){e.next=Ct,Ct=e;return}e.next=Pt,Pt=e}function Gn(){Yi++}function Yn(){if(--Yi>0)return;if(Ct){let t=Ct;for(Ct=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Pt;){let t=Pt;for(Pt=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function Ui(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ki(e){let t,n=e.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),Vn(i),tr(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}e.deps=t,e.depsTail=n}function Cn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Rt))return;e.globalVersion=Rt;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Cn(e)){e.flags&=-3;return}const n=q,i=ve;q=e,ve=!0;try{Ui(e);const s=e.fn(e._value);(t.version===0||tt(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{q=n,ve=i,Ki(e),e.flags&=-3}}function Vn(e,t=!1){const{dep:n,prevSub:i,nextSub:s}=e;if(i&&(i.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Vn(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function tr(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ve=!0;const Xi=[];function Xe(){Xi.push(ve),ve=!1}function je(){const e=Xi.pop();ve=e===void 0?!0:e}function ni(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=q;q=void 0;try{t()}finally{q=n}}}let Rt=0;class nr{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ji{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!q||!ve||q===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==q)n=this.activeLink=new nr(q,this),q.deps?(n.prevDep=q.depsTail,q.depsTail.nextDep=n,q.depsTail=n):q.deps=q.depsTail=n,qi(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=q.depsTail,n.nextDep=void 0,q.depsTail.nextDep=n,q.depsTail=n,q.deps===n&&(q.deps=i)}return n}trigger(t){this.version++,Rt++,this.notify(t)}notify(t){Gn();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Yn()}}}function qi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)qi(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Sn=new WeakMap,nt=Symbol(""),_n=Symbol(""),Lt=Symbol("");function ne(e,t,n){if(ve&&q){let i=Sn.get(e);i||Sn.set(e,i=new Map);let s=i.get(n);s||(i.set(n,s=new ji),s.map=i,s.key=n),s.track()}}function ke(e,t,n,i,s,r){const o=Sn.get(e);if(!o){Rt++;return}const l=a=>{a&&a.trigger()};if(Gn(),t==="clear")o.forEach(l);else{const a=L(e),c=a&&kn(n);if(a&&n==="length"){const u=Number(i);o.forEach((h,m)=>{(m==="length"||m===Lt||!Ie(m)&&m>=u)&&l(h)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),c&&l(o.get(Lt)),t){case"add":a?c&&l(o.get("length")):(l(o.get(nt)),ut(e)&&l(o.get(_n)));break;case"delete":a||(l(o.get(nt)),ut(e)&&l(o.get(_n)));break;case"set":ut(e)&&l(o.get(nt));break}}Yn()}function ot(e){const t=K(e);return t===e?t:(ne(t,"iterate",Lt),Te(e)?t:t.map(ue))}function on(e){return ne(e=K(e),"iterate",Lt),e}const ir={__proto__:null,[Symbol.iterator](){return mn(this,Symbol.iterator,ue)},concat(...e){return ot(this).concat(...e.map(t=>L(t)?ot(t):t))},entries(){return mn(this,"entries",e=>(e[1]=ue(e[1]),e))},every(e,t){return He(this,"every",e,t,void 0,arguments)},filter(e,t){return He(this,"filter",e,t,n=>n.map(ue),arguments)},find(e,t){return He(this,"find",e,t,ue,arguments)},findIndex(e,t){return He(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return He(this,"findLast",e,t,ue,arguments)},findLastIndex(e,t){return He(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return He(this,"forEach",e,t,void 0,arguments)},includes(...e){return yn(this,"includes",e)},indexOf(...e){return yn(this,"indexOf",e)},join(e){return ot(this).join(e)},lastIndexOf(...e){return yn(this,"lastIndexOf",e)},map(e,t){return He(this,"map",e,t,void 0,arguments)},pop(){return xt(this,"pop")},push(...e){return xt(this,"push",e)},reduce(e,...t){return ii(this,"reduce",e,t)},reduceRight(e,...t){return ii(this,"reduceRight",e,t)},shift(){return xt(this,"shift")},some(e,t){return He(this,"some",e,t,void 0,arguments)},splice(...e){return xt(this,"splice",e)},toReversed(){return ot(this).toReversed()},toSorted(e){return ot(this).toSorted(e)},toSpliced(...e){return ot(this).toSpliced(...e)},unshift(...e){return xt(this,"unshift",e)},values(){return mn(this,"values",ue)}};function mn(e,t,n){const i=on(e),s=i[t]();return i!==e&&!Te(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const sr=Array.prototype;function He(e,t,n,i,s,r){const o=on(e),l=o!==e&&!Te(e),a=o[t];if(a!==sr[t]){const h=a.apply(e,r);return l?ue(h):h}let c=n;o!==e&&(l?c=function(h,m){return n.call(this,ue(h),m,e)}:n.length>2&&(c=function(h,m){return n.call(this,h,m,e)}));const u=a.call(o,c,i);return l&&s?s(u):u}function ii(e,t,n,i){const s=on(e);let r=n;return s!==e&&(Te(e)?n.length>3&&(r=function(o,l,a){return n.call(this,o,l,a,e)}):r=function(o,l,a){return n.call(this,o,ue(l),a,e)}),s[t](r,...i)}function yn(e,t,n){const i=K(e);ne(i,"iterate",Lt);const s=i[t](...n);return(s===-1||s===!1)&&Xn(n[0])?(n[0]=K(n[0]),i[t](...n)):s}function xt(e,t,n=[]){Xe(),Gn();const i=K(e)[t].apply(e,n);return Yn(),je(),i}const rr=En("__proto__,__v_isRef,__isVue"),zi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ie));function or(e){Ie(e)||(e=String(e));const t=K(this);return ne(t,"has",e),t.hasOwnProperty(e)}class Ji{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?mr:ts:r?es:Zi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=L(t);if(!s){let a;if(o&&(a=ir[n]))return a;if(n==="hasOwnProperty")return or}const l=Reflect.get(t,n,oe(t)?t:i);return(Ie(n)?zi.has(n):rr(n))||(s||ne(t,"get",n),r)?l:oe(l)?o&&kn(n)?l:l.value:z(l)?s?ns(l):Kn(l):l}}class Qi extends Ji{constructor(t=!1){super(!1,t)}set(t,n,i,s){let r=t[n];if(!this._isShallow){const a=gt(r);if(!Te(i)&&!gt(i)&&(r=K(r),i=K(i)),!L(t)&&oe(r)&&!oe(i))return a?!1:(r.value=i,!0)}const o=L(t)&&kn(n)?Number(n)<t.length:Y(t,n),l=Reflect.set(t,n,i,oe(t)?t:s);return t===K(s)&&(o?tt(i,r)&&ke(t,"set",n,i):ke(t,"add",n,i)),l}deleteProperty(t,n){const i=Y(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&i&&ke(t,"delete",n,void 0),s}has(t,n){const i=Reflect.has(t,n);return(!Ie(n)||!zi.has(n))&&ne(t,"has",n),i}ownKeys(t){return ne(t,"iterate",L(t)?"length":nt),Reflect.ownKeys(t)}}class ar extends Ji{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const lr=new Qi,cr=new ar,ur=new Qi(!0);const Mn=e=>e,kt=e=>Reflect.getPrototypeOf(e);function fr(e,t,n){return function(...i){const s=this.__v_raw,r=K(s),o=ut(r),l=e==="entries"||e===Symbol.iterator&&o,a=e==="keys"&&o,c=s[e](...i),u=n?Mn:t?Rn:ue;return!t&&ne(r,"iterate",a?_n:nt),{next(){const{value:h,done:m}=c.next();return m?{value:h,done:m}:{value:l?[u(h[0]),u(h[1])]:u(h),done:m}},[Symbol.iterator](){return this}}}}function Bt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function dr(e,t){const n={get(s){const r=this.__v_raw,o=K(r),l=K(s);e||(tt(s,l)&&ne(o,"get",s),ne(o,"get",l));const{has:a}=kt(o),c=t?Mn:e?Rn:ue;if(a.call(o,s))return c(r.get(s));if(a.call(o,l))return c(r.get(l));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!e&&ne(K(s),"iterate",nt),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=K(r),l=K(s);return e||(tt(s,l)&&ne(o,"has",s),ne(o,"has",l)),s===l?r.has(s):r.has(s)||r.has(l)},forEach(s,r){const o=this,l=o.__v_raw,a=K(l),c=t?Mn:e?Rn:ue;return!e&&ne(a,"iterate",nt),l.forEach((u,h)=>s.call(r,c(u),c(h),o))}};return ae(n,e?{add:Bt("add"),set:Bt("set"),delete:Bt("delete"),clear:Bt("clear")}:{add(s){!t&&!Te(s)&&!gt(s)&&(s=K(s));const r=K(this);return kt(r).has.call(r,s)||(r.add(s),ke(r,"add",s,s)),this},set(s,r){!t&&!Te(r)&&!gt(r)&&(r=K(r));const o=K(this),{has:l,get:a}=kt(o);let c=l.call(o,s);c||(s=K(s),c=l.call(o,s));const u=a.call(o,s);return o.set(s,r),c?tt(r,u)&&ke(o,"set",s,r):ke(o,"add",s,r),this},delete(s){const r=K(this),{has:o,get:l}=kt(r);let a=o.call(r,s);a||(s=K(s),a=o.call(r,s)),l&&l.call(r,s);const c=r.delete(s);return a&&ke(r,"delete",s,void 0),c},clear(){const s=K(this),r=s.size!==0,o=s.clear();return r&&ke(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=fr(s,e,t)}),n}function Un(e,t){const n=dr(e,t);return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(Y(n,s)&&s in i?n:i,s,r)}const hr={get:Un(!1,!1)},gr={get:Un(!1,!0)},pr={get:Un(!0,!1)};const Zi=new WeakMap,es=new WeakMap,ts=new WeakMap,mr=new WeakMap;function yr(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wr(e){return e.__v_skip||!Object.isExtensible(e)?0:yr(Ys(e))}function Kn(e){return gt(e)?e:Wn(e,!1,lr,hr,Zi)}function xr(e){return Wn(e,!1,ur,gr,es)}function ns(e){return Wn(e,!0,cr,pr,ts)}function Wn(e,t,n,i,s){if(!z(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=wr(e);if(o===0)return e;const l=new Proxy(e,o===2?i:n);return s.set(e,l),l}function ft(e){return gt(e)?ft(e.__v_raw):!!(e&&e.__v_isReactive)}function gt(e){return!!(e&&e.__v_isReadonly)}function Te(e){return!!(e&&e.__v_isShallow)}function Xn(e){return e?!!e.__v_raw:!1}function K(e){const t=e&&e.__v_raw;return t?K(t):e}function vr(e){return!Y(e,"__v_skip")&&Object.isExtensible(e)&&Ei(e,"__v_skip",!0),e}const ue=e=>z(e)?Kn(e):e,Rn=e=>z(e)?ns(e):e;function oe(e){return e?e.__v_isRef===!0:!1}function Tr(e){return oe(e)?e.value:e}const br={get:(e,t,n)=>t==="__v_raw"?e:Tr(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return oe(s)&&!oe(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function is(e){return ft(e)?e:new Proxy(e,br)}class Ar{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ji(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Rt-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&q!==this)return Vi(this,!0),!0}get value(){const t=this.dep.track();return Wi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Pr(e,t,n=!1){let i,s;return O(e)?i=e:(i=e.get,s=e.set),new Ar(i,s,n)}const Gt={},Xt=new WeakMap;let Ze;function Cr(e,t=!1,n=Ze){if(n){let i=Xt.get(n);i||Xt.set(n,i=[]),i.push(e)}}function Sr(e,t,n=W){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:l,call:a}=n,c=_=>s?_:Te(_)||s===!1||s===0?Be(_,1):Be(_);let u,h,m,p,P=!1,S=!1;if(oe(e)?(h=()=>e.value,P=Te(e)):ft(e)?(h=()=>c(e),P=!0):L(e)?(S=!0,P=e.some(_=>ft(_)||Te(_)),h=()=>e.map(_=>{if(oe(_))return _.value;if(ft(_))return c(_);if(O(_))return a?a(_,2):_()})):O(e)?t?h=a?()=>a(e,2):e:h=()=>{if(m){Xe();try{m()}finally{je()}}const _=Ze;Ze=u;try{return a?a(e,3,[p]):e(p)}finally{Ze=_}}:h=Le,t&&s){const _=h,V=s===!0?1/0:s;h=()=>Be(_(),V)}const $=er(),I=()=>{u.stop(),$&&$.active&&Nn($.effects,u)};if(r&&t){const _=t;t=(...V)=>{_(...V),I()}}let D=S?new Array(e.length).fill(Gt):Gt;const E=_=>{if(!(!(u.flags&1)||!u.dirty&&!_))if(t){const V=u.run();if(s||P||(S?V.some((J,ee)=>tt(J,D[ee])):tt(V,D))){m&&m();const J=Ze;Ze=u;try{const ee=[V,D===Gt?void 0:S&&D[0]===Gt?[]:D,p];a?a(t,3,ee):t(...ee),D=V}finally{Ze=J}}}else u.run()};return l&&l(E),u=new Gi(h),u.scheduler=o?()=>o(E,!1):E,p=_=>Cr(_,!1,u),m=u.onStop=()=>{const _=Xt.get(u);if(_){if(a)a(_,4);else for(const V of _)V();Xt.delete(u)}},t?i?E(!0):D=u.run():o?o(E.bind(null,!0),!0):u.run(),I.pause=u.pause.bind(u),I.resume=u.resume.bind(u),I.stop=I,I}function Be(e,t=1/0,n){if(t<=0||!z(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,oe(e))Be(e.value,t,n);else if(L(e))for(let i=0;i<e.length;i++)Be(e[i],t,n);else if(tn(e)||ut(e))e.forEach(i=>{Be(i,t,n)});else if($i(e)){for(const i in e)Be(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Be(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ot(e,t,n,i){try{return i?e(...i):e()}catch(s){an(s,t,n)}}function Fe(e,t,n,i){if(O(e)){const s=Ot(e,t,n,i);return s&&Fi(s)&&s.catch(r=>{an(r,t,n)}),s}if(L(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Fe(e[r],t,n,i));return s}}function an(e,t,n,i=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||W;if(t){let l=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,a,c)===!1)return}l=l.parent}if(r){Xe(),Ot(r,null,10,[e,a,c]),je();return}}_r(e,n,s,i,o)}function _r(e,t,n,i=!0,s=!1){if(s)throw e;console.error(e)}const se=[];let _e=-1;const dt=[];let Ue=null,at=0;const ss=Promise.resolve();let jt=null;function rs(e){const t=jt||ss;return e?t.then(this?e.bind(this):e):t}function Mr(e){let t=_e+1,n=se.length;for(;t<n;){const i=t+n>>>1,s=se[i],r=It(s);r<e||r===e&&s.flags&2?t=i+1:n=i}return t}function jn(e){if(!(e.flags&1)){const t=It(e),n=se[se.length-1];!n||!(e.flags&2)&&t>=It(n)?se.push(e):se.splice(Mr(t),0,e),e.flags|=1,os()}}function os(){jt||(jt=ss.then(ls))}function Rr(e){L(e)?dt.push(...e):Ue&&e.id===-1?Ue.splice(at+1,0,e):e.flags&1||(dt.push(e),e.flags|=1),os()}function si(e,t,n=_e+1){for(;n<se.length;n++){const i=se[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;se.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function as(e){if(dt.length){const t=[...new Set(dt)].sort((n,i)=>It(n)-It(i));if(dt.length=0,Ue){Ue.push(...t);return}for(Ue=t,at=0;at<Ue.length;at++){const n=Ue[at];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ue=null,at=0}}const It=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ls(e){try{for(_e=0;_e<se.length;_e++){const t=se[_e];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ot(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;_e<se.length;_e++){const t=se[_e];t&&(t.flags&=-2)}_e=-1,se.length=0,as(),jt=null,(se.length||dt.length)&&ls()}}let we=null,cs=null;function qt(e){const t=we;return we=e,cs=e&&e.type.__scopeId||null,t}function Lr(e,t=we,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&hi(-1);const r=qt(t);let o;try{o=e(...s)}finally{qt(r),i._d&&hi(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ir(e,t){if(we===null)return e;const n=fn(we),i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,o,l,a=W]=t[s];r&&(O(r)&&(r={mounted:r,updated:r}),r.deep&&Be(o),i.push({dir:r,instance:n,value:o,oldValue:void 0,arg:l,modifiers:a}))}return e}function Je(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const l=s[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Xe(),Fe(a,n,8,[e.el,l,e,t]),je())}}const Fr=Symbol("_vte"),Dr=e=>e.__isTeleport;function qn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,qn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function us(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function zt(e,t,n,i,s=!1){if(L(e)){e.forEach((P,S)=>zt(P,t&&(L(t)?t[S]:t),n,i,s));return}if(St(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&zt(e,t,n,i.component.subTree);return}const r=i.shapeFlag&4?fn(i.component):i.el,o=s?null:r,{i:l,r:a}=e,c=t&&t.r,u=l.refs===W?l.refs={}:l.refs,h=l.setupState,m=K(h),p=h===W?()=>!1:P=>Y(m,P);if(c!=null&&c!==a&&(Q(c)?(u[c]=null,p(c)&&(h[c]=null)):oe(c)&&(c.value=null)),O(a))Ot(a,l,12,[o,u]);else{const P=Q(a),S=oe(a);if(P||S){const $=()=>{if(e.f){const I=P?p(a)?h[a]:u[a]:a.value;s?L(I)&&Nn(I,r):L(I)?I.includes(r)||I.push(r):P?(u[a]=[r],p(a)&&(h[a]=u[a])):(a.value=[r],e.k&&(u[e.k]=a.value))}else P?(u[a]=o,p(a)&&(h[a]=o)):S&&(a.value=o,e.k&&(u[e.k]=o))};o?($.id=-1,he($,n)):$()}}}sn().requestIdleCallback;sn().cancelIdleCallback;const St=e=>!!e.type.__asyncLoader,fs=e=>e.type.__isKeepAlive;function $r(e,t){ds(e,"a",t)}function Or(e,t){ds(e,"da",t)}function ds(e,t,n=re){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ln(t,i,n),n){let s=n.parent;for(;s&&s.parent;)fs(s.parent.vnode)&&Er(i,t,n,s),s=s.parent}}function Er(e,t,n,i){const s=ln(t,e,i,!0);hs(()=>{Nn(i[t],s)},n)}function ln(e,t,n=re,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Xe();const l=Et(n),a=Fe(t,n,e,o);return l(),je(),a});return i?s.unshift(r):s.push(r),r}}const Ye=e=>(t,n=re)=>{(!Dt||e==="sp")&&ln(e,(...i)=>t(...i),n)},Hr=Ye("bm"),Nr=Ye("m"),kr=Ye("bu"),Br=Ye("u"),Gr=Ye("bum"),hs=Ye("um"),Yr=Ye("sp"),Vr=Ye("rtg"),Ur=Ye("rtc");function Kr(e,t=re){ln("ec",e,t)}const Wr=Symbol.for("v-ndc");function Xr(e,t,n,i){let s;const r=n,o=L(e);if(o||Q(e)){const l=o&&ft(e);let a=!1;l&&(a=!Te(e),e=on(e)),s=new Array(e.length);for(let c=0,u=e.length;c<u;c++)s[c]=t(a?ue(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,r)}else if(z(e))if(e[Symbol.iterator])s=Array.from(e,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(e);s=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];s[a]=t(e[u],u,a,r)}}else s=[];return s}const Ln=e=>e?Os(e)?fn(e):Ln(e.parent):null,_t=ae(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ln(e.parent),$root:e=>Ln(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ps(e),$forceUpdate:e=>e.f||(e.f=()=>{jn(e.update)}),$nextTick:e=>e.n||(e.n=rs.bind(e.proxy)),$watch:e=>mo.bind(e)}),wn=(e,t)=>e!==W&&!e.__isScriptSetup&&Y(e,t),jr={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:l,appContext:a}=e;let c;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(wn(i,t))return o[t]=1,i[t];if(s!==W&&Y(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&Y(c,t))return o[t]=3,r[t];if(n!==W&&Y(n,t))return o[t]=4,n[t];In&&(o[t]=0)}}const u=_t[t];let h,m;if(u)return t==="$attrs"&&ne(e.attrs,"get",""),u(e);if((h=l.__cssModules)&&(h=h[t]))return h;if(n!==W&&Y(n,t))return o[t]=4,n[t];if(m=a.config.globalProperties,Y(m,t))return m[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return wn(s,t)?(s[t]=n,!0):i!==W&&Y(i,t)?(i[t]=n,!0):Y(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let l;return!!n[o]||e!==W&&Y(e,o)||wn(t,o)||(l=r[0])&&Y(l,o)||Y(i,o)||Y(_t,o)||Y(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Y(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ri(e){return L(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let In=!0;function qr(e){const t=ps(e),n=e.proxy,i=e.ctx;In=!1,t.beforeCreate&&oi(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:l,provide:a,inject:c,created:u,beforeMount:h,mounted:m,beforeUpdate:p,updated:P,activated:S,deactivated:$,beforeDestroy:I,beforeUnmount:D,destroyed:E,unmounted:_,render:V,renderTracked:J,renderTriggered:ee,errorCaptured:me,serverPrefetch:le,expose:te,inheritAttrs:xe,components:De,directives:$e,filters:Ve}=t;if(c&&zr(c,i,null),o)for(const G in o){const B=o[G];O(B)&&(i[G]=B.bind(n))}if(s){const G=s.call(n,n);z(G)&&(e.data=Kn(G))}if(In=!0,r)for(const G in r){const B=r[G],be=O(B)?B.bind(n,n):O(B.get)?B.get.bind(n,n):Le,Oe=!O(B)&&O(B.set)?B.set.bind(n):Le,ye=No({get:be,set:Oe});Object.defineProperty(i,G,{enumerable:!0,configurable:!0,get:()=>ye.value,set:H=>ye.value=H})}if(l)for(const G in l)gs(l[G],i,n,G);if(a){const G=O(a)?a.call(n):a;Reflect.ownKeys(G).forEach(B=>{no(B,G[B])})}u&&oi(u,e,"c");function Z(G,B){L(B)?B.forEach(be=>G(be.bind(n))):B&&G(B.bind(n))}if(Z(Hr,h),Z(Nr,m),Z(kr,p),Z(Br,P),Z($r,S),Z(Or,$),Z(Kr,me),Z(Ur,J),Z(Vr,ee),Z(Gr,D),Z(hs,_),Z(Yr,le),L(te))if(te.length){const G=e.exposed||(e.exposed={});te.forEach(B=>{Object.defineProperty(G,B,{get:()=>n[B],set:be=>n[B]=be})})}else e.exposed||(e.exposed={});V&&e.render===Le&&(e.render=V),xe!=null&&(e.inheritAttrs=xe),De&&(e.components=De),$e&&(e.directives=$e),le&&us(e)}function zr(e,t,n=Le){L(e)&&(e=Fn(e));for(const i in e){const s=e[i];let r;z(s)?"default"in s?r=Ut(s.from||i,s.default,!0):r=Ut(s.from||i):r=Ut(s),oe(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function oi(e,t,n){Fe(L(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function gs(e,t,n,i){let s=i.includes(".")?Rs(n,i):()=>n[i];if(Q(e)){const r=t[e];O(r)&&vn(s,r)}else if(O(e))vn(s,e.bind(n));else if(z(e))if(L(e))e.forEach(r=>gs(r,t,n,i));else{const r=O(e.handler)?e.handler.bind(n):t[e.handler];O(r)&&vn(s,r,e)}}function ps(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,l=r.get(t);let a;return l?a=l:!s.length&&!n&&!i?a=t:(a={},s.length&&s.forEach(c=>Jt(a,c,o,!0)),Jt(a,t,o)),z(t)&&r.set(t,a),a}function Jt(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&Jt(e,r,n,!0),s&&s.forEach(o=>Jt(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const l=Jr[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const Jr={data:ai,props:li,emits:li,methods:bt,computed:bt,beforeCreate:ie,created:ie,beforeMount:ie,mounted:ie,beforeUpdate:ie,updated:ie,beforeDestroy:ie,beforeUnmount:ie,destroyed:ie,unmounted:ie,activated:ie,deactivated:ie,errorCaptured:ie,serverPrefetch:ie,components:bt,directives:bt,watch:Zr,provide:ai,inject:Qr};function ai(e,t){return t?e?function(){return ae(O(e)?e.call(this,this):e,O(t)?t.call(this,this):t)}:t:e}function Qr(e,t){return bt(Fn(e),Fn(t))}function Fn(e){if(L(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ie(e,t){return e?[...new Set([].concat(e,t))]:t}function bt(e,t){return e?ae(Object.create(null),e,t):t}function li(e,t){return e?L(e)&&L(t)?[...new Set([...e,...t])]:ae(Object.create(null),ri(e),ri(t??{})):t}function Zr(e,t){if(!e)return t;if(!t)return e;const n=ae(Object.create(null),e);for(const i in t)n[i]=ie(e[i],t[i]);return n}function ms(){return{app:null,config:{isNativeTag:Bs,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eo=0;function to(e,t){return function(i,s=null){O(i)||(i=ae({},i)),s!=null&&!z(s)&&(s=null);const r=ms(),o=new WeakSet,l=[];let a=!1;const c=r.app={_uid:eo++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:ko,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&O(u.install)?(o.add(u),u.install(c,...h)):O(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,m){if(!a){const p=c._ceVNode||Ge(i,s);return p.appContext=r,m===!0?m="svg":m===!1&&(m=void 0),e(p,u,m),a=!0,c._container=u,u.__vue_app__=c,fn(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Fe(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=ht;ht=c;try{return u()}finally{ht=h}}};return c}}let ht=null;function no(e,t){if(re){let n=re.provides;const i=re.parent&&re.parent.provides;i===n&&(n=re.provides=Object.create(i)),n[e]=t}}function Ut(e,t,n=!1){const i=re||we;if(i||ht){const s=ht?ht._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&O(t)?t.call(i&&i.proxy):t}}const ys={},ws=()=>Object.create(ys),xs=e=>Object.getPrototypeOf(e)===ys;function io(e,t,n,i=!1){const s={},r=ws();e.propsDefaults=Object.create(null),vs(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=i?s:xr(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function so(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,l=K(s),[a]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let m=u[h];if(cn(e.emitsOptions,m))continue;const p=t[m];if(a)if(Y(r,m))p!==r[m]&&(r[m]=p,c=!0);else{const P=We(m);s[P]=Dn(a,l,P,p,e,!1)}else p!==r[m]&&(r[m]=p,c=!0)}}}else{vs(e,t,s,r)&&(c=!0);let u;for(const h in l)(!t||!Y(t,h)&&((u=st(h))===h||!Y(t,u)))&&(a?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Dn(a,l,h,void 0,e,!0)):delete s[h]);if(r!==l)for(const h in r)(!t||!Y(t,h))&&(delete r[h],c=!0)}c&&ke(e.attrs,"set","")}function vs(e,t,n,i){const[s,r]=e.propsOptions;let o=!1,l;if(t)for(let a in t){if(At(a))continue;const c=t[a];let u;s&&Y(s,u=We(a))?!r||!r.includes(u)?n[u]=c:(l||(l={}))[u]=c:cn(e.emitsOptions,a)||(!(a in i)||c!==i[a])&&(i[a]=c,o=!0)}if(r){const a=K(n),c=l||W;for(let u=0;u<r.length;u++){const h=r[u];n[h]=Dn(s,a,h,c[h],e,!Y(c,h))}}return o}function Dn(e,t,n,i,s,r){const o=e[n];if(o!=null){const l=Y(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&O(a)){const{propsDefaults:c}=s;if(n in c)i=c[n];else{const u=Et(s);i=c[n]=a.call(null,t),u()}}else i=a;s.ce&&s.ce._setProp(n,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===st(n))&&(i=!0))}return i}const ro=new WeakMap;function Ts(e,t,n=!1){const i=n?ro:t.propsCache,s=i.get(e);if(s)return s;const r=e.props,o={},l=[];let a=!1;if(!O(e)){const u=h=>{a=!0;const[m,p]=Ts(h,t,!0);ae(o,m),p&&l.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!a)return z(e)&&i.set(e,ct),ct;if(L(r))for(let u=0;u<r.length;u++){const h=We(r[u]);ci(h)&&(o[h]=W)}else if(r)for(const u in r){const h=We(u);if(ci(h)){const m=r[u],p=o[h]=L(m)||O(m)?{type:m}:ae({},m),P=p.type;let S=!1,$=!0;if(L(P))for(let I=0;I<P.length;++I){const D=P[I],E=O(D)&&D.name;if(E==="Boolean"){S=!0;break}else E==="String"&&($=!1)}else S=O(P)&&P.name==="Boolean";p[0]=S,p[1]=$,(S||Y(p,"default"))&&l.push(h)}}const c=[o,l];return z(e)&&i.set(e,c),c}function ci(e){return e[0]!=="$"&&!At(e)}const bs=e=>e[0]==="_"||e==="$stable",zn=e=>L(e)?e.map(Re):[Re(e)],oo=(e,t,n)=>{if(t._n)return t;const i=Lr((...s)=>zn(t(...s)),n);return i._c=!1,i},As=(e,t,n)=>{const i=e._ctx;for(const s in e){if(bs(s))continue;const r=e[s];if(O(r))t[s]=oo(s,r,i);else if(r!=null){const o=zn(r);t[s]=()=>o}}},Ps=(e,t)=>{const n=zn(t);e.slots.default=()=>n},Cs=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},ao=(e,t,n)=>{const i=e.slots=ws();if(e.vnode.shapeFlag&32){const s=t._;s?(Cs(i,t,n),n&&Ei(i,"_",s,!0)):As(t,i)}else t&&Ps(e,t)},lo=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,o=W;if(i.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:Cs(s,t,n):(r=!t.$stable,As(t,s)),o=t}else t&&(Ps(e,t),o={default:1});if(r)for(const l in s)!bs(l)&&o[l]==null&&delete s[l]},he=Ao;function co(e){return uo(e)}function uo(e,t){const n=sn();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:l,createComment:a,setText:c,setElementText:u,parentNode:h,nextSibling:m,setScopeId:p=Le,insertStaticContent:P}=e,S=(f,d,g,x=null,y=null,w=null,A=void 0,b=null,T=!!d.dynamicChildren)=>{if(f===d)return;f&&!Tt(f,d)&&(x=ze(f),H(f,y,w,!0),f=null),d.patchFlag===-2&&(T=!1,d.dynamicChildren=null);const{type:v,ref:R,shapeFlag:C}=d;switch(v){case un:$(f,d,g,x);break;case it:I(f,d,g,x);break;case Tn:f==null&&D(d,g,x,A);break;case Me:De(f,d,g,x,y,w,A,b,T);break;default:C&1?V(f,d,g,x,y,w,A,b,T):C&6?$e(f,d,g,x,y,w,A,b,T):(C&64||C&128)&&v.process(f,d,g,x,y,w,A,b,T,rt)}R!=null&&y&&zt(R,f&&f.ref,w,d||f,!d)},$=(f,d,g,x)=>{if(f==null)i(d.el=l(d.children),g,x);else{const y=d.el=f.el;d.children!==f.children&&c(y,d.children)}},I=(f,d,g,x)=>{f==null?i(d.el=a(d.children||""),g,x):d.el=f.el},D=(f,d,g,x)=>{[f.el,f.anchor]=P(f.children,d,g,x,f.el,f.anchor)},E=({el:f,anchor:d},g,x)=>{let y;for(;f&&f!==d;)y=m(f),i(f,g,x),f=y;i(d,g,x)},_=({el:f,anchor:d})=>{let g;for(;f&&f!==d;)g=m(f),s(f),f=g;s(d)},V=(f,d,g,x,y,w,A,b,T)=>{d.type==="svg"?A="svg":d.type==="math"&&(A="mathml"),f==null?J(d,g,x,y,w,A,b,T):le(f,d,y,w,A,b,T)},J=(f,d,g,x,y,w,A,b)=>{let T,v;const{props:R,shapeFlag:C,transition:M,dirs:F}=f;if(T=f.el=o(f.type,w,R&&R.is,R),C&8?u(T,f.children):C&16&&me(f.children,T,null,x,y,xn(f,w),A,b),F&&Je(f,null,x,"created"),ee(T,f,f.scopeId,A,x),R){for(const X in R)X!=="value"&&!At(X)&&r(T,X,null,R[X],w,x);"value"in R&&r(T,"value",null,R.value,w),(v=R.onVnodeBeforeMount)&&Se(v,x,f)}F&&Je(f,null,x,"beforeMount");const N=fo(y,M);N&&M.beforeEnter(T),i(T,d,g),((v=R&&R.onVnodeMounted)||N||F)&&he(()=>{v&&Se(v,x,f),N&&M.enter(T),F&&Je(f,null,x,"mounted")},y)},ee=(f,d,g,x,y)=>{if(g&&p(f,g),x)for(let w=0;w<x.length;w++)p(f,x[w]);if(y){let w=y.subTree;if(d===w||Is(w.type)&&(w.ssContent===d||w.ssFallback===d)){const A=y.vnode;ee(f,A,A.scopeId,A.slotScopeIds,y.parent)}}},me=(f,d,g,x,y,w,A,b,T=0)=>{for(let v=T;v<f.length;v++){const R=f[v]=b?Ke(f[v]):Re(f[v]);S(null,R,d,g,x,y,w,A,b)}},le=(f,d,g,x,y,w,A)=>{const b=d.el=f.el;let{patchFlag:T,dynamicChildren:v,dirs:R}=d;T|=f.patchFlag&16;const C=f.props||W,M=d.props||W;let F;if(g&&Qe(g,!1),(F=M.onVnodeBeforeUpdate)&&Se(F,g,d,f),R&&Je(d,f,g,"beforeUpdate"),g&&Qe(g,!0),(C.innerHTML&&M.innerHTML==null||C.textContent&&M.textContent==null)&&u(b,""),v?te(f.dynamicChildren,v,b,g,x,xn(d,y),w):A||B(f,d,b,null,g,x,xn(d,y),w,!1),T>0){if(T&16)xe(b,C,M,g,y);else if(T&2&&C.class!==M.class&&r(b,"class",null,M.class,y),T&4&&r(b,"style",C.style,M.style,y),T&8){const N=d.dynamicProps;for(let X=0;X<N.length;X++){const U=N[X],fe=C[U],ce=M[U];(ce!==fe||U==="value")&&r(b,U,fe,ce,y,g)}}T&1&&f.children!==d.children&&u(b,d.children)}else!A&&v==null&&xe(b,C,M,g,y);((F=M.onVnodeUpdated)||R)&&he(()=>{F&&Se(F,g,d,f),R&&Je(d,f,g,"updated")},x)},te=(f,d,g,x,y,w,A)=>{for(let b=0;b<d.length;b++){const T=f[b],v=d[b],R=T.el&&(T.type===Me||!Tt(T,v)||T.shapeFlag&70)?h(T.el):g;S(T,v,R,null,x,y,w,A,!0)}},xe=(f,d,g,x,y)=>{if(d!==g){if(d!==W)for(const w in d)!At(w)&&!(w in g)&&r(f,w,d[w],null,y,x);for(const w in g){if(At(w))continue;const A=g[w],b=d[w];A!==b&&w!=="value"&&r(f,w,b,A,y,x)}"value"in g&&r(f,"value",d.value,g.value,y)}},De=(f,d,g,x,y,w,A,b,T)=>{const v=d.el=f?f.el:l(""),R=d.anchor=f?f.anchor:l("");let{patchFlag:C,dynamicChildren:M,slotScopeIds:F}=d;F&&(b=b?b.concat(F):F),f==null?(i(v,g,x),i(R,g,x),me(d.children||[],g,R,y,w,A,b,T)):C>0&&C&64&&M&&f.dynamicChildren?(te(f.dynamicChildren,M,g,y,w,A,b),(d.key!=null||y&&d===y.subTree)&&Ss(f,d,!0)):B(f,d,g,R,y,w,A,b,T)},$e=(f,d,g,x,y,w,A,b,T)=>{d.slotScopeIds=b,f==null?d.shapeFlag&512?y.ctx.activate(d,g,x,A,T):Ve(d,g,x,y,w,A,T):qe(f,d,T)},Ve=(f,d,g,x,y,w,A)=>{const b=f.component=Fo(f,x,y);if(fs(f)&&(b.ctx.renderer=rt),Do(b,!1,A),b.asyncDep){if(y&&y.registerDep(b,Z,A),!f.el){const T=b.subTree=Ge(it);I(null,T,d,g)}}else Z(b,f,d,g,y,w,A)},qe=(f,d,g)=>{const x=d.component=f.component;if(To(f,d,g))if(x.asyncDep&&!x.asyncResolved){G(x,d,g);return}else x.next=d,x.update();else d.el=f.el,x.vnode=d},Z=(f,d,g,x,y,w,A)=>{const b=()=>{if(f.isMounted){let{next:C,bu:M,u:F,parent:N,vnode:X}=f;{const Pe=_s(f);if(Pe){C&&(C.el=X.el,G(f,C,A)),Pe.asyncDep.then(()=>{f.isUnmounted||b()});return}}let U=C,fe;Qe(f,!1),C?(C.el=X.el,G(f,C,A)):C=X,M&&Yt(M),(fe=C.props&&C.props.onVnodeBeforeUpdate)&&Se(fe,N,C,X),Qe(f,!0);const ce=fi(f),Ae=f.subTree;f.subTree=ce,S(Ae,ce,h(Ae.el),ze(Ae),f,y,w),C.el=ce.el,U===null&&bo(f,ce.el),F&&he(F,y),(fe=C.props&&C.props.onVnodeUpdated)&&he(()=>Se(fe,N,C,X),y)}else{let C;const{el:M,props:F}=d,{bm:N,m:X,parent:U,root:fe,type:ce}=f,Ae=St(d);Qe(f,!1),N&&Yt(N),!Ae&&(C=F&&F.onVnodeBeforeMount)&&Se(C,U,d),Qe(f,!0);{fe.ce&&fe.ce._injectChildStyle(ce);const Pe=f.subTree=fi(f);S(null,Pe,g,x,f,y,w),d.el=Pe.el}if(X&&he(X,y),!Ae&&(C=F&&F.onVnodeMounted)){const Pe=d;he(()=>Se(C,U,Pe),y)}(d.shapeFlag&256||U&&St(U.vnode)&&U.vnode.shapeFlag&256)&&f.a&&he(f.a,y),f.isMounted=!0,d=g=x=null}};f.scope.on();const T=f.effect=new Gi(b);f.scope.off();const v=f.update=T.run.bind(T),R=f.job=T.runIfDirty.bind(T);R.i=f,R.id=f.uid,T.scheduler=()=>jn(R),Qe(f,!0),v()},G=(f,d,g)=>{d.component=f;const x=f.vnode.props;f.vnode=d,f.next=null,so(f,d.props,x,g),lo(f,d.children,g),Xe(),si(f),je()},B=(f,d,g,x,y,w,A,b,T=!1)=>{const v=f&&f.children,R=f?f.shapeFlag:0,C=d.children,{patchFlag:M,shapeFlag:F}=d;if(M>0){if(M&128){Oe(v,C,g,x,y,w,A,b,T);return}else if(M&256){be(v,C,g,x,y,w,A,b,T);return}}F&8?(R&16&&Ee(v,y,w),C!==v&&u(g,C)):R&16?F&16?Oe(v,C,g,x,y,w,A,b,T):Ee(v,y,w,!0):(R&8&&u(g,""),F&16&&me(C,g,x,y,w,A,b,T))},be=(f,d,g,x,y,w,A,b,T)=>{f=f||ct,d=d||ct;const v=f.length,R=d.length,C=Math.min(v,R);let M;for(M=0;M<C;M++){const F=d[M]=T?Ke(d[M]):Re(d[M]);S(f[M],F,g,null,y,w,A,b,T)}v>R?Ee(f,y,w,!0,!1,C):me(d,g,x,y,w,A,b,T,C)},Oe=(f,d,g,x,y,w,A,b,T)=>{let v=0;const R=d.length;let C=f.length-1,M=R-1;for(;v<=C&&v<=M;){const F=f[v],N=d[v]=T?Ke(d[v]):Re(d[v]);if(Tt(F,N))S(F,N,g,null,y,w,A,b,T);else break;v++}for(;v<=C&&v<=M;){const F=f[C],N=d[M]=T?Ke(d[M]):Re(d[M]);if(Tt(F,N))S(F,N,g,null,y,w,A,b,T);else break;C--,M--}if(v>C){if(v<=M){const F=M+1,N=F<R?d[F].el:x;for(;v<=M;)S(null,d[v]=T?Ke(d[v]):Re(d[v]),g,N,y,w,A,b,T),v++}}else if(v>M)for(;v<=C;)H(f[v],y,w,!0),v++;else{const F=v,N=v,X=new Map;for(v=N;v<=M;v++){const de=d[v]=T?Ke(d[v]):Re(d[v]);de.key!=null&&X.set(de.key,v)}let U,fe=0;const ce=M-N+1;let Ae=!1,Pe=0;const wt=new Array(ce);for(v=0;v<ce;v++)wt[v]=0;for(v=F;v<=C;v++){const de=f[v];if(fe>=ce){H(de,y,w,!0);continue}let Ce;if(de.key!=null)Ce=X.get(de.key);else for(U=N;U<=M;U++)if(wt[U-N]===0&&Tt(de,d[U])){Ce=U;break}Ce===void 0?H(de,y,w,!0):(wt[Ce-N]=v+1,Ce>=Pe?Pe=Ce:Ae=!0,S(de,d[Ce],g,null,y,w,A,b,T),fe++)}const Qn=Ae?ho(wt):ct;for(U=Qn.length-1,v=ce-1;v>=0;v--){const de=N+v,Ce=d[de],Zn=de+1<R?d[de+1].el:x;wt[v]===0?S(null,Ce,g,Zn,y,w,A,b,T):Ae&&(U<0||v!==Qn[U]?ye(Ce,g,Zn,2):U--)}}},ye=(f,d,g,x,y=null)=>{const{el:w,type:A,transition:b,children:T,shapeFlag:v}=f;if(v&6){ye(f.component.subTree,d,g,x);return}if(v&128){f.suspense.move(d,g,x);return}if(v&64){A.move(f,d,g,rt);return}if(A===Me){i(w,d,g);for(let C=0;C<T.length;C++)ye(T[C],d,g,x);i(f.anchor,d,g);return}if(A===Tn){E(f,d,g);return}if(x!==2&&v&1&&b)if(x===0)b.beforeEnter(w),i(w,d,g),he(()=>b.enter(w),y);else{const{leave:C,delayLeave:M,afterLeave:F}=b,N=()=>i(w,d,g),X=()=>{C(w,()=>{N(),F&&F()})};M?M(w,N,X):X()}else i(w,d,g)},H=(f,d,g,x=!1,y=!1)=>{const{type:w,props:A,ref:b,children:T,dynamicChildren:v,shapeFlag:R,patchFlag:C,dirs:M,cacheIndex:F}=f;if(C===-2&&(y=!1),b!=null&&zt(b,null,g,f,!0),F!=null&&(d.renderCache[F]=void 0),R&256){d.ctx.deactivate(f);return}const N=R&1&&M,X=!St(f);let U;if(X&&(U=A&&A.onVnodeBeforeUnmount)&&Se(U,d,f),R&6)mt(f.component,g,x);else{if(R&128){f.suspense.unmount(g,x);return}N&&Je(f,null,d,"beforeUnmount"),R&64?f.type.remove(f,d,g,rt,x):v&&!v.hasOnce&&(w!==Me||C>0&&C&64)?Ee(v,d,g,!1,!0):(w===Me&&C&384||!y&&R&16)&&Ee(T,d,g),x&&Ht(f)}(X&&(U=A&&A.onVnodeUnmounted)||N)&&he(()=>{U&&Se(U,d,f),N&&Je(f,null,d,"unmounted")},g)},Ht=f=>{const{type:d,el:g,anchor:x,transition:y}=f;if(d===Me){dn(g,x);return}if(d===Tn){_(f);return}const w=()=>{s(g),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(f.shapeFlag&1&&y&&!y.persisted){const{leave:A,delayLeave:b}=y,T=()=>A(g,w);b?b(f.el,w,T):T()}else w()},dn=(f,d)=>{let g;for(;f!==d;)g=m(f),s(f),f=g;s(d)},mt=(f,d,g)=>{const{bum:x,scope:y,job:w,subTree:A,um:b,m:T,a:v}=f;ui(T),ui(v),x&&Yt(x),y.stop(),w&&(w.flags|=8,H(A,f,d,g)),b&&he(b,d),he(()=>{f.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},Ee=(f,d,g,x=!1,y=!1,w=0)=>{for(let A=w;A<f.length;A++)H(f[A],d,g,x,y)},ze=f=>{if(f.shapeFlag&6)return ze(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const d=m(f.anchor||f.el),g=d&&d[Fr];return g?m(g):d};let yt=!1;const Nt=(f,d,g)=>{f==null?d._vnode&&H(d._vnode,null,null,!0):S(d._vnode||null,f,d,null,null,null,g),d._vnode=f,yt||(yt=!0,si(),as(),yt=!1)},rt={p:S,um:H,m:ye,r:Ht,mt:Ve,mc:me,pc:B,pbc:te,n:ze,o:e};return{render:Nt,hydrate:void 0,createApp:to(Nt)}}function xn({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Qe({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function fo(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ss(e,t,n=!1){const i=e.children,s=t.children;if(L(i)&&L(s))for(let r=0;r<i.length;r++){const o=i[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=Ke(s[r]),l.el=o.el),!n&&l.patchFlag!==-2&&Ss(o,l)),l.type===un&&(l.el=o.el)}}function ho(e){const t=e.slice(),n=[0];let i,s,r,o,l;const a=e.length;for(i=0;i<a;i++){const c=e[i];if(c!==0){if(s=n[n.length-1],e[s]<c){t[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,e[n[l]]<c?r=l+1:o=l;c<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function _s(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_s(t)}function ui(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const go=Symbol.for("v-scx"),po=()=>Ut(go);function vn(e,t,n){return Ms(e,t,n)}function Ms(e,t,n=W){const{immediate:i,deep:s,flush:r,once:o}=n,l=ae({},n),a=t&&i||!t&&r!=="post";let c;if(Dt){if(r==="sync"){const p=po();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=Le,p.resume=Le,p.pause=Le,p}}const u=re;l.call=(p,P,S)=>Fe(p,u,P,S);let h=!1;r==="post"?l.scheduler=p=>{he(p,u&&u.suspense)}:r!=="sync"&&(h=!0,l.scheduler=(p,P)=>{P?p():jn(p)}),l.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const m=Sr(e,t,l);return Dt&&(c?c.push(m):a&&m()),m}function mo(e,t,n){const i=this.proxy,s=Q(e)?e.includes(".")?Rs(i,e):()=>i[e]:e.bind(i,i);let r;O(t)?r=t:(r=t.handler,n=t);const o=Et(this),l=Ms(s,r.bind(i),n);return o(),l}function Rs(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const yo=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${We(t)}Modifiers`]||e[`${st(t)}Modifiers`];function wo(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||W;let s=n;const r=t.startsWith("update:"),o=r&&yo(i,t.slice(7));o&&(o.trim&&(s=n.map(u=>Q(u)?u.trim():u)),o.number&&(s=n.map(Hi)));let l,a=i[l=hn(t)]||i[l=hn(We(t))];!a&&r&&(a=i[l=hn(st(t))]),a&&Fe(a,e,6,s);const c=i[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Fe(c,e,6,s)}}function Ls(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let o={},l=!1;if(!O(e)){const a=c=>{const u=Ls(c,t,!0);u&&(l=!0,ae(o,u))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!l?(z(e)&&i.set(e,null),null):(L(r)?r.forEach(a=>o[a]=null):ae(o,r),z(e)&&i.set(e,o),o)}function cn(e,t){return!e||!en(t)?!1:(t=t.slice(2).replace(/Once$/,""),Y(e,t[0].toLowerCase()+t.slice(1))||Y(e,st(t))||Y(e,t))}function fi(e){const{type:t,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:l,emit:a,render:c,renderCache:u,props:h,data:m,setupState:p,ctx:P,inheritAttrs:S}=e,$=qt(e);let I,D;try{if(n.shapeFlag&4){const _=s||i,V=_;I=Re(c.call(V,_,u,h,p,m,P)),D=l}else{const _=t;I=Re(_.length>1?_(h,{attrs:l,slots:o,emit:a}):_(h,null)),D=t.props?l:xo(l)}}catch(_){Mt.length=0,an(_,e,1),I=Ge(it)}let E=I;if(D&&S!==!1){const _=Object.keys(D),{shapeFlag:V}=E;_.length&&V&7&&(r&&_.some(Hn)&&(D=vo(D,r)),E=pt(E,D,!1,!0))}return n.dirs&&(E=pt(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&qn(E,n.transition),I=E,qt($),I}const xo=e=>{let t;for(const n in e)(n==="class"||n==="style"||en(n))&&((t||(t={}))[n]=e[n]);return t},vo=(e,t)=>{const n={};for(const i in e)(!Hn(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function To(e,t,n){const{props:i,children:s,component:r}=e,{props:o,children:l,patchFlag:a}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return i?di(i,o,c):!!o;if(a&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const m=u[h];if(o[m]!==i[m]&&!cn(c,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?di(i,o,c):!0:!!o;return!1}function di(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!cn(n,r))return!0}return!1}function bo({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const Is=e=>e.__isSuspense;function Ao(e,t){t&&t.pendingBranch?L(e)?t.effects.push(...e):t.effects.push(e):Rr(e)}const Me=Symbol.for("v-fgt"),un=Symbol.for("v-txt"),it=Symbol.for("v-cmt"),Tn=Symbol.for("v-stc"),Mt=[];let pe=null;function lt(e=!1){Mt.push(pe=e?null:[])}function Po(){Mt.pop(),pe=Mt[Mt.length-1]||null}let Ft=1;function hi(e,t=!1){Ft+=e,e<0&&pe&&t&&(pe.hasOnce=!0)}function Fs(e){return e.dynamicChildren=Ft>0?pe||ct:null,Po(),Ft>0&&pe&&pe.push(e),e}function vt(e,t,n,i,s,r){return Fs(j(e,t,n,i,s,r,!0))}function Co(e,t,n,i,s){return Fs(Ge(e,t,n,i,s,!0))}function Ds(e){return e?e.__v_isVNode===!0:!1}function Tt(e,t){return e.type===t.type&&e.key===t.key}const $s=({key:e})=>e??null,Kt=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Q(e)||oe(e)||O(e)?{i:we,r:e,k:t,f:!!n}:e:null);function j(e,t=null,n=null,i=0,s=null,r=e===Me?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$s(t),ref:t&&Kt(t),scopeId:cs,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:we};return l?(Jn(a,n),r&128&&e.normalize(a)):n&&(a.shapeFlag|=Q(n)?8:16),Ft>0&&!o&&pe&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&pe.push(a),a}const Ge=So;function So(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===Wr)&&(e=it),Ds(e)){const l=pt(e,t,!0);return n&&Jn(l,n),Ft>0&&!r&&pe&&(l.shapeFlag&6?pe[pe.indexOf(e)]=l:pe.push(l)),l.patchFlag=-2,l}if(Ho(e)&&(e=e.__vccOpts),t){t=_o(t);let{class:l,style:a}=t;l&&!Q(l)&&(t.class=et(l)),z(a)&&(Xn(a)&&!L(a)&&(a=ae({},a)),t.style=Bn(a))}const o=Q(e)?1:Is(e)?128:Dr(e)?64:z(e)?4:O(e)?2:0;return j(e,t,n,i,s,o,r,!0)}function _o(e){return e?Xn(e)||xs(e)?ae({},e):e:null}function pt(e,t,n=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:l,transition:a}=e,c=t?Ro(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&$s(c),ref:t&&t.ref?n&&r?L(r)?r.concat(Kt(t)):[r,Kt(t)]:Kt(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Me?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pt(e.ssContent),ssFallback:e.ssFallback&&pt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&i&&qn(u,a.clone(u)),u}function Mo(e=" ",t=0){return Ge(un,null,e,t)}function gi(e="",t=!1){return t?(lt(),Co(it,null,e)):Ge(it,null,e)}function Re(e){return e==null||typeof e=="boolean"?Ge(it):L(e)?Ge(Me,null,e.slice()):Ds(e)?Ke(e):Ge(un,null,String(e))}function Ke(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:pt(e)}function Jn(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(L(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Jn(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!xs(t)?t._ctx=we:s===3&&we&&(we.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else O(t)?(t={default:t,_ctx:we},n=32):(t=String(t),i&64?(n=16,t=[Mo(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ro(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=et([t.class,i.class]));else if(s==="style")t.style=Bn([t.style,i.style]);else if(en(s)){const r=t[s],o=i[s];o&&r!==o&&!(L(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function Se(e,t,n,i=null){Fe(e,t,7,[n,i])}const Lo=ms();let Io=0;function Fo(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||Lo,r={uid:Io++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Zs(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ts(i,s),emitsOptions:Ls(i,s),emit:null,emitted:null,propsDefaults:W,inheritAttrs:i.inheritAttrs,ctx:W,data:W,props:W,attrs:W,slots:W,refs:W,setupState:W,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=wo.bind(null,r),e.ce&&e.ce(r),r}let re=null,Qt,$n;{const e=sn(),t=(n,i)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};Qt=t("__VUE_INSTANCE_SETTERS__",n=>re=n),$n=t("__VUE_SSR_SETTERS__",n=>Dt=n)}const Et=e=>{const t=re;return Qt(e),e.scope.on(),()=>{e.scope.off(),Qt(t)}},pi=()=>{re&&re.scope.off(),Qt(null)};function Os(e){return e.vnode.shapeFlag&4}let Dt=!1;function Do(e,t=!1,n=!1){t&&$n(t);const{props:i,children:s}=e.vnode,r=Os(e);io(e,i,r,t),ao(e,s,n);const o=r?$o(e,t):void 0;return t&&$n(!1),o}function $o(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,jr);const{setup:i}=n;if(i){Xe();const s=e.setupContext=i.length>1?Eo(e):null,r=Et(e),o=Ot(i,e,0,[e.props,s]),l=Fi(o);if(je(),r(),(l||e.sp)&&!St(e)&&us(e),l){if(o.then(pi,pi),t)return o.then(a=>{mi(e,a)}).catch(a=>{an(a,e,0)});e.asyncDep=o}else mi(e,o)}else Es(e)}function mi(e,t,n){O(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:z(t)&&(e.setupState=is(t)),Es(e)}function Es(e,t,n){const i=e.type;e.render||(e.render=i.render||Le);{const s=Et(e);Xe();try{qr(e)}finally{je(),s()}}}const Oo={get(e,t){return ne(e,"get",""),e[t]}};function Eo(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Oo),slots:e.slots,emit:e.emit,expose:t}}function fn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(is(vr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in _t)return _t[n](e)},has(t,n){return n in t||n in _t}})):e.proxy}function Ho(e){return O(e)&&"__vccOpts"in e}const No=(e,t)=>Pr(e,t,Dt),ko="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let On;const yi=typeof window<"u"&&window.trustedTypes;if(yi)try{On=yi.createPolicy("vue",{createHTML:e=>e})}catch{}const Hs=On?e=>On.createHTML(e):e=>e,Bo="http://www.w3.org/2000/svg",Go="http://www.w3.org/1998/Math/MathML",Ne=typeof document<"u"?document:null,wi=Ne&&Ne.createElement("template"),Yo={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t==="svg"?Ne.createElementNS(Bo,e):t==="mathml"?Ne.createElementNS(Go,e):n?Ne.createElement(e,{is:n}):Ne.createElement(e);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>Ne.createTextNode(e),createComment:e=>Ne.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ne.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const o=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{wi.innerHTML=Hs(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const l=wi.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Vo=Symbol("_vtc");function Uo(e,t,n){const i=e[Vo];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xi=Symbol("_vod"),Ko=Symbol("_vsh"),Wo=Symbol(""),Xo=/(^|;)\s*display\s*:/;function jo(e,t,n){const i=e.style,s=Q(n);let r=!1;if(n&&!s){if(t)if(Q(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Wt(i,l,"")}else for(const o in t)n[o]==null&&Wt(i,o,"");for(const o in n)o==="display"&&(r=!0),Wt(i,o,n[o])}else if(s){if(t!==n){const o=i[Wo];o&&(n+=";"+o),i.cssText=n,r=Xo.test(n)}}else t&&e.removeAttribute("style");xi in e&&(e[xi]=r?i.display:"",e[Ko]&&(i.display="none"))}const vi=/\s*!important$/;function Wt(e,t,n){if(L(n))n.forEach(i=>Wt(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=qo(e,t);vi.test(n)?e.setProperty(st(i),n.replace(vi,""),"important"):e[i]=n}}const Ti=["Webkit","Moz","ms"],bn={};function qo(e,t){const n=bn[t];if(n)return n;let i=We(t);if(i!=="filter"&&i in e)return bn[t]=i;i=Oi(i);for(let s=0;s<Ti.length;s++){const r=Ti[s]+i;if(r in e)return bn[t]=r}return t}const bi="http://www.w3.org/1999/xlink";function Ai(e,t,n,i,s,r=zs(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(bi,t.slice(6,t.length)):e.setAttributeNS(bi,t,n):n==null||r&&!Ni(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Ie(n)?String(n):n)}function Pi(e,t,n,i,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Hs(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Ni(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function Ns(e,t,n,i){e.addEventListener(t,n,i)}function zo(e,t,n,i){e.removeEventListener(t,n,i)}const Ci=Symbol("_vei");function Jo(e,t,n,i,s=null){const r=e[Ci]||(e[Ci]={}),o=r[t];if(i&&o)o.value=i;else{const[l,a]=Qo(t);if(i){const c=r[t]=ta(i,s);Ns(e,l,c,a)}else o&&(zo(e,l,o,a),r[t]=void 0)}}const Si=/(?:Once|Passive|Capture)$/;function Qo(e){let t;if(Si.test(e)){t={};let i;for(;i=e.match(Si);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):st(e.slice(2)),t]}let An=0;const Zo=Promise.resolve(),ea=()=>An||(Zo.then(()=>An=0),An=Date.now());function ta(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Fe(na(i,n.value),t,5,[i])};return n.value=e,n.attached=ea(),n}function na(e,t){if(L(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const _i=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ia=(e,t,n,i,s,r)=>{const o=s==="svg";t==="class"?Uo(e,i,o):t==="style"?jo(e,n,i):en(t)?Hn(t)||Jo(e,t,n,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):sa(e,t,i,o))?(Pi(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ai(e,t,i,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Q(i))?Pi(e,We(t),i,r,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Ai(e,t,i,o))};function sa(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&_i(t)&&O(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return _i(t)&&Q(n)?!1:t in e}const Mi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return L(t)?n=>Yt(t,n):t},Pn=Symbol("_assign"),ra={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const s=tn(t);Ns(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Hi(Zt(o)):Zt(o));e[Pn](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,rs(()=>{e._assigning=!1})}),e[Pn]=Mi(i)},mounted(e,{value:t}){Ri(e,t)},beforeUpdate(e,t,n){e[Pn]=Mi(n)},updated(e,{value:t}){e._assigning||Ri(e,t)}};function Ri(e,t){const n=e.multiple,i=L(t);if(!(n&&!i&&!tn(t))){for(let s=0,r=e.options.length;s<r;s++){const o=e.options[s],l=Zt(o);if(n)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=t.some(c=>String(c)===String(l)):o.selected=Qs(t,l)>-1}else o.selected=t.has(l);else if(rn(Zt(o),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Zt(e){return"_value"in e?e._value:e.value}const oa=ae({patchProp:ia},Yo);let Li;function aa(){return Li||(Li=co(oa))}const la=(...e)=>{const t=aa().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=ua(i);if(!s)return;const r=t._component;!O(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,ca(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function ca(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ua(e){return Q(e)?document.querySelector(e):e}const fa="/ATC-Simulator/assets/airplane-BYs8BZn3.png";function Ii(){return Math.floor(Math.random()*8988)+1011}class da{constructor(){this.audioContext=null,this.initialized=!1}init(){if(this.initialized)return!0;try{const t=window.AudioContext||window.webkitAudioContext;return t?(this.audioContext=new t,this.initialized=!0,!0):(console.warn("Web Audio API is not supported in this browser"),!1)}catch(t){return console.error("Failed to initialize Audio Context:",t),!1}}makeDistortionCurve(t){const n=typeof t=="number"?t:50,i=44100,s=new Float32Array(i),r=Math.PI/180;for(let o=0;o<i;o++){const l=o*2/i-1;s[o]=(3+n)*l*20*r/(Math.PI+n*Math.abs(l))}return s}addRadioNoise(t=500,n=.05){if(!this.initialized&&!this.init())return null;try{let s;if(this.audioContext.createScriptProcessor)s=this.audioContext.createScriptProcessor(4096,1,1),s.onaudioprocess=r=>{const o=r.outputBuffer.getChannelData(0);for(let l=0;l<4096;l++)o[l]=(Math.random()*2-1)*n,Math.random()>.995&&(o[l]=Math.random()>.5?n*2:-n*2)};else if(this.audioContext.createGain){s=this.audioContext.createGain(),s.gain.value=n*.3;const r=this.audioContext.createBufferSource(),o=this.audioContext.createBuffer(1,32768,this.audioContext.sampleRate),l=o.getChannelData(0);for(let a=0;a<32768;a++)l[a]=Math.random()*2-1;r.buffer=o,r.loop=!0,r.connect(s),r.start(),setTimeout(()=>{r.stop()},t)}else return null;return s.connect(this.audioContext.destination),setTimeout(()=>{s.disconnect()},t),s}catch(i){return console.error("Failed to create radio noise:",i),null}}playBeep(t=1e3,n=200,i=.1){if(!this.initialized&&!this.init())return null;try{const s=this.audioContext.createOscillator(),r=this.audioContext.createGain();return s.type="sine",s.frequency.value=t,s.connect(r),r.connect(this.audioContext.destination),r.gain.value=i,s.start(),setTimeout(()=>{r.gain.setValueAtTime(i,this.audioContext.currentTime),r.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+.1),setTimeout(()=>{s.stop()},100)},n-100),s}catch(s){return console.error("Failed to play beep:",s),null}}async applyRadioEffectToSpeech(t,n={}){if(!this.initialized&&!this.init()){const i=new SpeechSynthesisUtterance(t);return i.lang=n.lang||"en-US",i.pitch=n.pitch||1,i.rate=n.rate||1,n.voice&&(i.voice=n.voice),window.speechSynthesis.speak(i),new Promise(s=>{i.onend=s})}try{const i=new SpeechSynthesisUtterance(t);return i.lang=n.lang||"en-US",i.pitch=n.pitch||1,i.rate=n.rate||1,n.voice&&(i.voice=n.voice),window.speechSynthesis.cancel(),new Promise(s=>{this.addRadioNoise(300,.03),setTimeout(()=>{window.speechSynthesis.speak(i),i.onend=()=>{this.addRadioNoise(300,.03),setTimeout(s,300)}},300)})}catch(i){console.error("Failed to apply radio effect:",i);const s=new SpeechSynthesisUtterance(t);return s.lang=n.lang||"en-US",s.pitch=n.pitch||1,s.rate=n.rate||1,n.voice&&(s.voice=n.voice),window.speechSynthesis.speak(s),Promise.resolve()}}}const ks=new da,ha=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},k=!0,ga={data(){return{ctx:null,airplaneImage:null,airplanes:[],selectedPlane:null,dragging:!1,dragLine:null,speedLevel:1,dragFollowing:null,communicationLog:["","","",""],allCommunicationLog:["","","",""],gameStatus:"start",gameLoopId:null,spawnApproachInterval:null,spawnDepartureInterval:null,score:0,takeoffSpeed:.2,navBeacons:[{x:100,y:200,id:"NAV1"},{x:1700,y:100,id:"NAV2"},{x:100,y:1100,id:"NAV3"}],difficulty:"intermediate",difficultySettings:{beginner:{baseSpawnInterval:2e4,busySpawnInterval:15e3,calmSpawnInterval:25e3,busyPhaseProbability:.15,calmPhaseDuration:6e4},intermediate:{baseSpawnInterval:15e3,busySpawnInterval:1e4,calmSpawnInterval:2e4,busyPhaseProbability:.25,calmPhaseDuration:45e3},advanced:{baseSpawnInterval:12e3,busySpawnInterval:8e3,calmSpawnInterval:18e3,busyPhaseProbability:.35,calmPhaseDuration:3e4},expert:{baseSpawnInterval:1e4,busySpawnInterval:6e3,calmSpawnInterval:15e3,busyPhaseProbability:.45,calmPhaseDuration:2e4}},maxAircraftCount:{beginner:2,intermediate:4,advanced:7,expert:12},gamePhase:"normal",gamePhaseStartTime:0,phaseChangeTimeout:null,currentSpawnInterval:null,dynamicMaxAircraftCount:0,gameProgressLevel:0,gameStartTime:0,canSpawnNewAircraft:!0,lastSpawnTime:0,recognition:null,isRecording:!1,voiceCommandText:"",lastVoiceCommandTime:0,spacePressHandled:!1,shiftKeyPressed:!1,isLoading:!0,nextLogId:1,voiceRecognitionTimeout:null,lastVoiceCommandProcessTime:0,continuousMode:!1,gameProgressInterval:null,incomingAircraft:[],isGameOver:!1,gameOverReason:"",gameOverMessage:"",problemAircraft:[],blinkTimer:null,isBlinking:!1,groundWaitingStartTimes:{},safetyDistance:50,groundWaitTimeout:6e4,radarBounds:{minX:-50,maxX:1850,minY:-50,maxY:1250}}},computed:{currentDifficultySettings(){return this.difficultySettings[this.difficulty]},currentMaxAircraftCount(){return this.maxAircraftCount[this.difficulty]},currentApproachCount(){return this.airplanes.filter(e=>e.state==="APPROACH"||e.state==="FINAL_APPROACH").length},currentDepartureCount(){return this.airplanes.filter(e=>e.state==="READY_FOR_TAKEOFF"||e.state==="TAKEOFF").length},currentAircraftCount(){return this.airplanes.length}},mounted(){const e=this.$refs.radarCanvas;this.ctx=e.getContext("2d"),this.airplaneImage=new Image,this.airplaneImage.src=fa,this.airplaneImage.onload=()=>{this.renderLoop()},this.initSpeechRecognition(),this.$el.focus(),this.initSpeechRecognition()},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)},methods:{getPlaneById(e){return this.airplanes.find(t=>t.id===e)},startGame(){if(this.gameStatus==="paused"){this.gameStatus="running",this.addToCommunicationLog("Game resumed"),this.spawnApproachInterval=setInterval(()=>{this.checkGamePhase(),(Math.random()<.7?"approach":"departure")==="approach"?this.spawnApproach():this.spawnDeparture()},this.currentSpawnInterval),this.gameProgressInterval=setInterval(()=>{this.updateGameProgress()},6e4);return}this.score=0,this.gameStatus="running",this.communicationLog=["","","",""],this.allCommunicationLog=["","","",""],this.nextLogId=1,this.airplanes=[],this.lastUpdateTime=Date.now(),this.gameLoopId||(this.gameLoopId=setInterval(()=>{this.updateFlights(),this.radarSweep()},50)),this.gamePhase="normal",this.gamePhaseStartTime=Date.now(),this.gameStartTime=Date.now(),this.gameProgressLevel=0,this.dynamicMaxAircraftCount=this.maxAircraftCount[this.difficulty];const e=this.difficultySettings[this.difficulty];this.currentSpawnInterval=e.baseSpawnInterval,this.phaseChangeTimeout&&clearTimeout(this.phaseChangeTimeout),this.spawnApproach(),this.spawnApproachInterval&&clearInterval(this.spawnApproachInterval),this.spawnApproachInterval=setInterval(()=>{this.checkGamePhase(),(Math.random()<.7?"approach":"departure")==="approach"?this.spawnApproach():this.spawnDeparture()},this.currentSpawnInterval),this.addToCommunicationLog(`Game started. Difficulty: ${this.getDifficultyText()}`),this.gameProgressInterval=setInterval(()=>{this.updateGameProgress()},6e4),this.updateTakeoffQueue()},pauseGame(){this.gameStatus==="running"&&(this.gameStatus="paused",this.addToCommunicationLog("Game paused"),clearInterval(this.spawnApproachInterval),clearInterval(this.spawnDepartureInterval),clearInterval(this.gameProgressInterval),this.phaseChangeTimeout&&clearTimeout(this.phaseChangeTimeout))},endGame(){this.gameStatus="ended",this.addToCommunicationLog("Game ended"),window.speechSynthesis.cancel(),clearInterval(this.spawnApproachInterval),clearInterval(this.spawnDepartureInterval),clearInterval(this.gameProgressInterval),this.phaseChangeTimeout&&(clearTimeout(this.phaseChangeTimeout),this.phaseChangeTimeout=null),this.gamePhase="normal",this.gameProgressLevel=0,this.airplanes=[]},restartGame(){this.endGame(),this.airplanes=[],this.selectedPlane=null,this.dragging=!1,this.dragLine=null,this.communicationLog=["","","",""],this.allCommunicationLog=["","","",""],this.score=0,this.canSpawnNewAircraft=!0,this.gameStatus="stopped",this.addToCommunicationLog((this.isEnglish,'Game reset, please click "Start" button to begin'))},renderLoop(){this.drawRadar(),this.gameStatus==="running"&&this.updateFlights(),requestAnimationFrame(this.renderLoop)},numberToWords(e){const t=["zero","one","two","tree","four","five","six","seven","eight","niner"];return e.toString().split("").map(n=>t[+n]).join(" ")},formatHeadingForVoice(e){const t=e.toString().padStart(3,"0");return this.numberToWords(t)},convertToChineseAviationNumber(e){const t={0:"洞",1:"幺",2:"两",3:"三",4:"四",5:"五",6:"六",7:"拐",8:"八",9:"九"};return String(e).split("").map(n=>t[n]||n).join("")},speak(e,t=!0){if(!e)return;window.speechSynthesis.cancel();let n=e.replace(/\([^)]*\)/g,"").replace(/[.,?!;:]/g,"").replace(/\s+/g," ").trim();if(n=n.replace(/\b(B)(\d{4})\b/g,(o,l,a)=>{const c="Bravo",u=this.numberToWords(a);return`${c} ${u}`}),n=n.replace(/(heading|head)\s+(\d+)/gi,(o,l,a)=>{const c=this.numberToWords(a);return`${l} ${c}`}),n.includes("runway")){const o=n.match(/runway\s+(\w+)/);if(o&&o[1]){const l=o[1];let a="";for(let c=0;c<l.length;c++){const u=l[c];u>="0"&&u<="9"?a+=this.numberToWords(u)+" ":u==="L"?a+="left ":u==="R"?a+="right ":a+=u+" "}n=n.replace(/runway\s+\w+/,`runway ${a.trim()}`)}}console.log(`Speech: ${n}`);const i=()=>{const o=window.speechSynthesis.getVoices(),l=["Google US English","Alex","Samantha","Daniel","Microsoft David - English (United States)","Microsoft Zira - English (United States)"];for(const c of l){const u=o.find(h=>h.name.includes(c));if(u)return console.log(`使用优先语音: ${u.name}`),u}const a=o.find(c=>c.lang.startsWith("en-"));return a?(console.log(`使用英语语音: ${a.name}`),a):o.length>0?(console.log(`使用默认语音: ${o[0].name}`),o[0]):null},s=()=>new Promise(o=>{if(window.speechSynthesis.getVoices().length>0)o(i());else{const a=()=>{window.speechSynthesis.removeEventListener("voiceschanged",a),o(i())};window.speechSynthesis.addEventListener("voiceschanged",a),setTimeout(()=>{window.speechSynthesis.removeEventListener("voiceschanged",a),o(null)},2e3)}});(async()=>{const o=await s();try{await ks.applyRadioEffectToSpeech(n,{lang:"en-US",pitch:1,rate:1,voice:o})}catch(l){console.error("Radio effect failed, falling back to regular speech:",l);const a=new SpeechSynthesisUtterance(n);a.lang="en-US",a.pitch=1,a.rate=1,o&&(a.voice=o),speechSynthesis.speak(a)}})().catch(o=>{console.error("Failed to apply radio effect:",o);const l=new SpeechSynthesisUtterance(n);l.lang="en-US",l.pitch=1,l.rate=1,speechSynthesis.speak(l)}),t&&this.addToCommunicationLog(e)},addToCommunicationLog(e){const t=e;this.communicationLog.unshift(t),this.allCommunicationLog=[...this.communicationLog],this.communicationLog.length>20&&(this.communicationLog=this.communicationLog.slice(0,20),this.allCommunicationLog=[...this.communicationLog])},spawnApproach(){if(this.gameStatus!=="running")return;if(this.currentAircraftCount>=this.dynamicMaxAircraftCount){console.log(`已达到${this.difficulty}难度下的最大飞机数量限制: ${this.dynamicMaxAircraftCount}`);return}const t="B"+Ii(),n=[{x:0,y:Math.random()*1200,position:"left"},{x:1800,y:Math.random()*1200,position:"right"},{x:Math.random()*1800,y:0,position:"top"},{x:Math.random()*1800,y:1200,position:"bottom"}],i=n[Math.floor(Math.random()*n.length)],s=900-i.x,r=600-i.y,o=Math.round((Math.atan2(s,-r)*180/Math.PI+360)%360),l={id:t,x:i.x,y:i.y,heading:o,targetHeading:o,speed:.2*this.speedLevel,state:"APPROACH",selected:!1,countdown:5,visible:!1,position:i.position,fromDirection:i.position};this.incomingAircraft.push(l),this.addToCommunicationLog(`${t} approaching in 5 seconds`);let a=5;const c=setInterval(()=>{a--,a>0?l.countdown=a:(clearInterval(c),this.airplanes.push(l),this.incomingAircraft=this.incomingAircraft.filter(u=>u.id!==l.id),l.visible=!0,this.lastSpawnTime=Date.now(),this.addToCommunicationLog(`${t} approaching`))},1e3)},spawnDeparture(){if(this.gameStatus!=="running")return;if(this.currentAircraftCount>=this.dynamicMaxAircraftCount){console.log(`已达到${this.difficulty}难度下的最大飞机数量限制: ${this.dynamicMaxAircraftCount}`);return}const t="B"+Ii(),n=this.airplanes.filter(l=>l.state==="READY_FOR_TAKEOFF").length,o={id:t,x:900,y:600+n*50,heading:0,targetHeading:0,speed:0,state:"READY_FOR_TAKEOFF",selected:!1,queuePosition:n};this.airplanes.push(o),this.addToCommunicationLog(`${t} ready for takeoff`),this.lastSpawnTime=Date.now()},updateFlights(){var e;try{if(this.gameStatus!=="running"||this.isGameOver)return;const t=performance.now(),n=Date.now(),i=Math.min((n-this.lastUpdateTime)/1e3,.1);this.lastUpdateTime=n;const s=[];if(this.checkCollisions(),this.checkAircraftOutOfBounds(),this.checkGroundDelays(),this.isGameOver)return;let r=!1;for(const a of this.airplanes)try{if(a.state==="READY_FOR_TAKEOFF"?this.groundWaitingStartTimes[a.id]||(this.groundWaitingStartTimes[a.id]=n):this.groundWaitingStartTimes[a.id]&&(delete this.groundWaitingStartTimes[a.id],a.queuePosition!==void 0&&(r=!0,delete a.queuePosition)),a.newCommandIssued&&(console.log(`${a.id} 收到新命令，取消进场过程`),a.state="FLYING",a.speed=.4*this.speedLevel,a._lastHeadingTime=0,a._headingStep=0,a.approachPath=null,a.approachPathCreated=!1,a.landingRunway=null,a.newCommandIssued=!1,a.targetRunwayX=void 0,a.targetRunwayY=void 0,console.debug(`已清除${a.id}的进场路径，当前飞机状态: ${a.state}，位置: (${Math.round(a.x)},${Math.round(a.y)})`)),a.state==="FINAL_APPROACH"&&a.approachPath)try{if(this.updateApproachFlight(a))continue;console.log(`${a.id} 进场更新失败，重置为正常飞行状态`),a.state="APPROACH",a.approachPath=null,a.approachPathCreated=!1}catch(h){console.error(`${a.id} 进场更新发生错误:`,h),a.state="APPROACH",a.approachPath=null,a.approachPathCreated=!1}const c=performance.now();if(c-t>16){console.log(`updateFlights执行时间过长(${Math.round(c-t)}ms)，延迟处理剩余飞机`),setTimeout(()=>this.updateFlights(),0);break}if(a.targetRunwayX!==void 0&&a.targetRunwayY!==void 0){const h=a.targetRunwayX-a.x,m=a.targetRunwayY-a.y,p=Math.sqrt(h*h+m*m);let P=Math.atan2(h,-m)*180/Math.PI;if(P<0&&(P+=360),a.targetHeading=Math.round(P),p<20){a.state="LANDING",a.x=a.targetRunwayX,a.y=a.targetRunwayY,a.runway=a.landingRunway,a.landingStartTime=Date.now();const S=.4*this.speedLevel;a.originalSpeed=Math.min(a.speed,S),a.landingDirection=a.landingRunway.startsWith("18")?180:0;const $=`${a.id}, landing runway ${a.landingRunway}`;this.addToCommunicationLog($),console.log(`${a.id} 到达跑道入口，开始着陆，着陆速度：${a.originalSpeed.toFixed(2)}`),a.targetRunwayX=void 0,a.targetRunwayY=void 0;continue}}if(["APPROACH","FLYING","TAKEOFF","FINAL_APPROACH"].includes(a.state)){this.updateAircraftHeading(a);const h=a.heading*Math.PI/180,m=Math.sin(h)*a.speed,p=-Math.cos(h)*a.speed;a.x+=m,a.y+=p}if(a.state==="LANDING"){if(a.newCommandIssued){console.log(`${a.id} 在降落过程中收到新命令，中止降落`),a.state="FLYING",a.speed=.4*this.speedLevel,a.landingRunway=null,a.runway=null,a.newCommandIssued=!1;continue}const h=a.landingDirection||((e=a.landingRunway)!=null&&e.startsWith("18")?180:0);a.landingDirection=h;const m=h*Math.PI/180;a.originalSpeed===void 0&&(a.originalSpeed=.5*this.speedLevel);const p=Math.sin(m)*a.speed,P=-Math.cos(m)*a.speed;a.x+=p,a.y+=P;const S=300;let $=0;a.landingDirection===0?$=Math.max(0,Math.min(1,(750-a.y)/S)):$=Math.max(0,Math.min(1,(a.y-450)/S)),console.log(`${a.id} landing progress: ${Math.round($*100)}%, runway: ${a.runway}, direction: ${a.landingDirection}`);const I=1-$*$;if(a.speed=a.originalSpeed*I,$>=2/3){const D=`${a.id} has vacated runway ${a.runway}`;this.addToCommunicationLog(D),console.log(D),this.score+=2,console.log(`${a.id} 落地完成，得2分，当前总分: ${this.score}`),s.push(a),this.canSpawnNewAircraft=!0,this.$forceUpdate()}}if(a.state==="TAKEOFF"){a.speed=.2*this.speedLevel;for(const h of this.navBeacons)if(Math.sqrt(Math.pow(a.x-h.x,2)+Math.pow(a.y-h.y,2))<40){this.score+=1,console.log(`${a.id} 到达导航台${h.id}，得1分，当前总分: ${this.score}`),this.speak(`${a.id} has reached ${h.id}, exiting radar coverage`,!0),this.addToCommunicationLog(`${a.id} has reached navigation beacon ${h.id}`),s.push(a),this.canSpawnNewAircraft=!0;break}(a.x<-100||a.x>1900||a.y<-100||a.y>1300)&&(this.addToCommunicationLog(`${a.id} has exited radar coverage`),s.push(a),this.canSpawnNewAircraft=!0)}}catch(c){console.error(`更新飞机 ${a.id} 时出错:`,c)}this.airplanes=this.airplanes.filter(a=>!s.includes(a)),s.length>0&&(console.log("飞机已消失，允许生成新飞机"),setTimeout(()=>this.checkAndSpawnNewAircraft(),1e3));const l=performance.now()-t;l>25&&console.warn(`updateFlights处理耗时: ${l.toFixed(2)}ms，可能影响游戏性能`),r&&this.updateTakeoffQueue(),this.landingCount=this.currentLandingCount,this.departureCount=this.currentDepartureCount}catch(t){console.error("更新飞机时发生严重错误:",t)}},updateAircraftHeading(e){const t=Math.round(e.heading)%360,n=Math.round(e.targetHeading)%360;if(t===n){e.heading=n;return}const i=(n-t+360)%360,s=(t-n+360)%360,r=Math.min(i,s),o=.5;let l=1;r>30&&(l=Math.max(.3,1-(r-30)/150));const a=o*l;let c;e.forcedTurnDirection?c=e.forcedTurnDirection==="right":Math.abs(i-s)<5&&(i>175||s>175)?c=e.preferredTurnDirection!=="left":c=i<=s,c?i<=a?e.heading=n:e.heading=(e.heading+a)%360:s<=a?e.heading=n:e.heading=(e.heading-a+360)%360,e.lastTurnDirection=c?"right":"left"},drawRadar(){const e=this.ctx;e.clearRect(0,0,1800,1200),e.fillStyle="#0a1a1a",e.fillRect(0,0,1800,1200),this.isGameOver&&(e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,1800,1200)),e.fillStyle="#444",e.fillRect(800,450,60,300),e.fillRect(940,450,60,300),e.fillStyle="#fff",e.font="bold 16px monospace",e.fillText("18R",810,445),e.fillText("18L",950,445),e.fillText("36L",810,770),e.fillText("36R",950,770),e.strokeStyle="#004433";for(let t=200;t<=1e3;t+=200)e.beginPath(),e.arc(900,600,t,0,Math.PI*2),e.stroke();if(e.beginPath(),e.moveTo(900,0),e.lineTo(900,1200),e.moveTo(0,600),e.lineTo(1800,600),e.stroke(),this.drawNavBeacons(e),e.fillStyle="#00ffcc",e.font="bold 18px monospace",e.fillText(`Status: ${this.getGameStatusText()}`,20,30),e.fillText(`Difficulty: ${this.getDifficultyText()}`,20,60),e.fillText(`Score: ${this.score}`,20,90),this.gameStatus==="running"){e.fillText(`Aircraft: ${this.currentAircraftCount}/${this.dynamicMaxAircraftCount}`,20,120);let t="",n="#00ffcc";switch(this.gamePhase){case"busy":t="BUSY TRAFFIC",n="#ff9900";break;case"calm":t="CALM TRAFFIC",n="#00ff99";break;default:t="NORMAL TRAFFIC"}e.fillStyle=n,e.fillText(t,20,150),e.fillStyle="#00ffcc",this.gameProgressLevel>0&&e.fillText(`Progress Level: ${this.gameProgressLevel}`,20,180)}for(const t of this.airplanes){e.save();const n=this.problemAircraft.includes(t)||this.problemAircraft.includes(t.id);n&&this.isBlinking?(e.fillStyle="#FF0000",e.globalAlpha=.8):this.isGameOver&&!n&&(e.globalAlpha=.5),e.translate(t.x,t.y);const s=(t.heading-90+360)%360;e.rotate(s*Math.PI/180),e.drawImage(this.airplaneImage,-20,-20,40,40),e.restore(),n&&this.isBlinking?e.fillStyle="#FF0000":e.fillStyle=t.selected?"#00ffcc":"#ffffff",e.font="14px monospace",e.fillText(`${t.id} [${t.state}]`,t.x+25,t.y),e.fillStyle="#00ffcc",e.font="12px monospace";const r=Math.round(t.heading)%360,o=Math.round(t.targetHeading)%360;t.selected&&(r!==o?e.fillText(`HDG: ${r}° → ${o}°`,t.x+25,t.y+20):e.fillText(`HDG: ${r}°`,t.x+25,t.y+20))}if(this.dragLine){const t=this.dragLine.x1,n=this.dragLine.y1,i=this.dragLine.x2,s=this.dragLine.y2;if(this.dragLine.dragging){e.strokeStyle="#ffff00",e.lineWidth=3,e.setLineDash([]),e.beginPath(),e.moveTo(t,n),e.lineTo(i,s),e.stroke();const r=15,o=Math.atan2(s-n,i-t);if(e.beginPath(),e.moveTo(i,s),e.lineTo(i-r*Math.cos(o-Math.PI/6),s-r*Math.sin(o-Math.PI/6)),e.lineTo(i-r*Math.cos(o+Math.PI/6),s-r*Math.sin(o+Math.PI/6)),e.closePath(),e.fillStyle="#ffff00",e.fill(),this.dragLine.isNearRunwayEntrance){const l=this.dragLine.runwayInfo;e.fillStyle="#ffff00",e.font="bold 14px monospace",e.textAlign="center";const a=(t+i)/2,c=(n+s)/2-20;e.fillText(`→ APPR RWY ${l.id}`,a,c),e.textAlign="start"}else if(!this.dragLine.isDirectFlight){const l=i-t,a=s-n,c=Math.round((Math.atan2(l,-a)*180/Math.PI+360)%360);e.fillStyle="#ffff00",e.font="bold 14px monospace",e.textAlign="center";const u=(t+i)/2,h=(n+s)/2-20;e.fillText(`→ HDG ${c}°`,u,h),e.textAlign="start"}}else if(this.dragLine.landingApproach){e.strokeStyle="#00ffcc",e.lineWidth=1,e.setLineDash([5,5]);const r=this.dragLine.runwayEntrance.x,o=this.dragLine.runwayEntrance.y,l=this.dragLine.finalHeading,a=Math.round(this.dragLine.startHeading)%360,c=(l-a+360)%360,u=(a-l+360)%360,h=c<=u,m=h?"right":"left";this.drawApproachPath(e,t,n,r,o,a,l,h),e.setLineDash([]),e.fillStyle="#00ffcc",e.font="12px monospace",e.textAlign="center",e.fillText(`APPR RWY ${this.dragLine.runwayInfo.id}`,r,o-25);const p=(t+r)/2,P=(n+o)/2;e.fillText(`${m} to ${l}°`,p,P-15),e.textAlign="start"}else{e.strokeStyle="#00ffcc",e.lineWidth=1,e.setLineDash([5,5]);const r=Math.round(this.dragLine.startHeading)%360,o=Math.round(this.dragLine.targetHeading)%360;if(this.dragLine.isDirectFlight){e.beginPath(),e.moveTo(t,n);const l=o*Math.PI/180,a=400,c=t+Math.sin(l)*a,u=n-Math.cos(l)*a;e.lineTo(c,u),e.stroke(),e.setLineDash([]),e.fillStyle="#00ffcc",e.font="12px monospace",e.textAlign="center",e.fillText(`HDG ${o}°`,c,u-20),e.textAlign="start"}else{const l=this.dragLine.clockwiseDiff,a=this.dragLine.counterClockwiseDiff;let c;this.dragLine.turnDirection==="right"?c=!0:this.dragLine.turnDirection==="left"?c=!1:c=l<=a,e.beginPath(),e.moveTo(t,n);let u=r,h=t,m=n;const p=200,P=Math.min(l,a),S=.5;let $=1;P>30&&($=Math.max(.3,1-(P-30)/150));const I=S*$;for(let E=0;E<p;E++){u!==o&&(c?(o-u+360)%360<=I?u=o:u=(u+I)%360:(u-o+360)%360<=I?u=o:u=(u-I+360)%360);const _=u*Math.PI/180,V=Math.sin(_)*2,J=-Math.cos(_)*2;if(h+=V,m+=J,e.lineTo(h,m),u===o&&E>100)break}e.stroke(),e.setLineDash([]),e.fillStyle="#00ffcc",e.font="12px monospace",e.textAlign="center";const D=c?"right":"left";e.fillText(`${D} HDG ${o}°`,h,m-20),e.textAlign="start"}}e.lineWidth=1,e.setLineDash([])}for(const t of this.incomingAircraft){e.save(),e.fillStyle="#ff9900",e.font="bold 24px monospace",e.textAlign="center";let n=t.countdown.toString(),i=0,s=0;t.position==="left"?(i=30,n=t.countdown<=3?t.countdown.toString():""):t.position==="right"?(i=-30,n=t.countdown<=3?t.countdown.toString():""):t.position==="top"?(s=30,n=(6-t.countdown).toString()):t.position==="bottom"&&(s=-30,n=t.countdown.toString()),e.fillText(n,t.x+i,t.y+s),e.font="14px monospace",e.fillText(`${t.id}`,t.x,t.y+25),e.restore()}this.isGameOver&&this.drawGameOver(e)},getClickedPlane(e,t){return this.airplanes.find(i=>Math.sqrt(Math.pow(i.x-e,2)+Math.pow(i.y-t,2))<30)},startDrag(e){if(this.gameStatus!=="running"&&!this.isGameOver)return;const t=this.$refs.radarCanvas,n=t.getBoundingClientRect(),i=t.width/n.width,s=t.height/n.height,r=(e.clientX-n.left)*i,o=(e.clientY-n.top)*s;if(this.isGameOver){if(this.isPointInRect(r,o,700,700,200,60)){this.handleRestartButton();return}if(this.isPointInRect(r,o,950,700,200,60)){this.handleMenuButton();return}return}const l=this.findClickedPlane(r,o);if(l){if(l.state==="TAKEOFF"&&!this.isAircraftOffRunway(l)){this.addToCommunicationLog(`${l.id}, must exit runway before accepting heading commands`);return}this.selectedPlane=l,l.selected=!0,this.dragging=!0,l.state==="READY_FOR_TAKEOFF"?this.dragFollowing=l:this.dragLine={x1:l.x,y1:l.y,x2:r,y2:o,dragging:!0}}},onDrag(e){if(!this.dragging||this.gameStatus!=="running")return;const t=this.$refs.radarCanvas,n=t.getBoundingClientRect(),i=t.width/n.width,s=t.height/n.height,r=(e.clientX-n.left)*i,o=(e.clientY-n.top)*s;if(this.dragFollowing)this.dragFollowing.x=r,this.dragFollowing.y=o;else if(this.selectedPlane){if(this.selectedPlane.state==="TAKEOFF"&&!this.isAircraftOffRunway(this.selectedPlane)){const D=(this.selectedPlane.heading+360)%360,E=D*Math.PI/180,_=Math.sin(E)*150,V=-Math.cos(E)*150;this.dragLine={x1:this.selectedPlane.x,y1:this.selectedPlane.y,x2:this.selectedPlane.x+_,y2:this.selectedPlane.y+V,startHeading:D,targetHeading:D,dragging:!0,isDirectFlight:!0,turnDirection:"none",isOnRunway:!0};return}const l=r-this.selectedPlane.x,a=o-this.selectedPlane.y,c=this.checkNearRunwayEntrance(r,o),u=c&&c.isNear,h=Math.round((Math.atan2(l,-a)*180/Math.PI+360)%360),m=Math.round(this.selectedPlane.heading)%360,p=(h-m+360)%360,P=(m-h+360)%360,S=15,$=p<S||P<S;let I="none";$||(I=p<=P?"right":"left"),this.dragLine={x1:this.selectedPlane.x,y1:this.selectedPlane.y,x2:r,y2:o,startHeading:m,targetHeading:h,turnDirection:I,clockwiseDiff:p,counterClockwiseDiff:P,dragging:!0,isDirectFlight:$,isNearRunwayEntrance:u,runwayInfo:u&&c?c.info:null}}},endDrag(e){if(!this.dragging||this.gameStatus!=="running")return;if(this.dragFollowing&&this.selectedPlane){const n=this.selectedPlane,i=n.x,s=n.y,r=900,o=600,a=n.state==="READY_FOR_TAKEOFF";if(n.state==="READY_FOR_TAKEOFF"){const c=i>=800&&i<=860,u=i>=940&&i<=1e3;let h=!1;if(s<460&&(c||u)){n.heading=180,n.targetHeading=180,n.state="TAKEOFF",n.speed=.2*this.speedLevel;const m=c?"18R":"18L",p=`${n.id}, cleared for takeoff runway ${m}`;this.speak(p),console.log("Taking off southbound from 18R/18L, heading:",n.heading),h=!0}else if(s>740&&(c||u)){n.heading=0,n.targetHeading=0,n.state="TAKEOFF",n.speed=.2*this.speedLevel;const m=c?"36L":"36R",p=`${n.id}, cleared for takeoff runway ${m}`;this.speak(p),console.log("Taking off northbound from 36L/36R, heading:",n.heading),h=!0}h?delete n.queuePosition:(n.x=r,n.y=o,this.addToCommunicationLog(`${n.id}, unable to take position, return to gate`),console.log(`${n.id} 未成功放置到跑道端口，返回原位`)),a&&this.updateTakeoffQueue()}n.selected=!1,this.selectedPlane=null,this.dragging=!1,this.dragFollowing=null;return}if(!this.selectedPlane||!this.dragLine){this.selectedPlane=null,this.dragging=!1,this.dragFollowing=null;return}const t=this.selectedPlane;if(t.state==="TAKEOFF"&&!this.isAircraftOffRunway(t)){this.addToCommunicationLog(`${t.id}, please exit runway before turning`),t.selected=!1,this.selectedPlane=null,this.dragging=!1,this.dragFollowing=null,this.dragLine=null;return}if(this.dragLine.isNearRunwayEntrance&&(t.state==="APPROACH"||t.state==="FLYING")){const n=this.dragLine.runwayInfo;if(!n){console.error("Runway information missing in dragLine");return}const i=n.x,s=n.y,r=Math.round(t.heading)%360,o=n.direction;this.dragLine.dragging=!1,this.dragLine.landingApproach=!0,this.dragLine.runwayEntrance={x:i,y:s},this.dragLine.finalHeading=o;const l=this.drawApproachPath(this.ctx,t.x,t.y,i,s,r,o,!0);t.state="FINAL_APPROACH",t.landingRunway=n.id,t.landingDirection=o;const a=t.speed;t.approachPath={startX:t.x,startY:t.y,runwayX:i,runwayY:s,startHeading:r,finalHeading:o,bezierPoints:{start:{x:t.x,y:t.y},cp1:l.controlPoints[0],cp2:l.controlPoints[1],preApproach:l.preApproachPoint},finalApproachPoint:l.finalApproachPoint,phase:"INITIAL",progressT:0,lastUpdateTime:Date.now(),originalSpeed:a,speedFactor:1,curveLength:l.curveLength},console.log(`${t.id} 进场速度设置: ${a.toFixed(2)}`);const c=`${t.id}, cleared to land runway ${n.id}`;this.speak(c),setTimeout(()=>{this.dragLine=null},3e3),console.log(`${t.id} cleared to land runway ${n.id}, direction=${o}°`)}else{if(this.dragLine.dragging){const r=this.dragLine.x2-this.dragLine.x1,o=this.dragLine.y2-this.dragLine.y1,l=Math.round((Math.atan2(r,-o)*180/Math.PI+360)%360);this.dragLine.targetHeading=l,t.targetHeading=l}const n=Math.round(this.dragLine.targetHeading)%360,i=this.dragLine.turnDirection;this.resetApproachOrLandingState(t),t.targetHeading=n,i&&i!=="none"&&(t.forcedTurnDirection=i,t.preferredTurnDirection=i);let s;if(this.dragLine.isDirectFlight)s=`${t.id}, maintain heading ${n}`,t.forcedTurnDirection=null,t.preferredTurnDirection=null;else{const r=i==="right"?"turn right":"turn left";s=`${t.id}, ${r} heading ${n}`,console.log(`${t.id} 转向指令: ${r}, 当前=${Math.round(this.dragLine.startHeading)}°, 目标=${n}°`)}this.speak(s),this.dragLine&&(this.dragLine.dragging=!1),setTimeout(()=>{this.dragLine=null},1500)}t&&(t.selected=!1),this.selectedPlane=null,this.dragging=!1,this.dragFollowing=null},getGameStatusText(){switch(this.gameStatus){case"stopped":return"Not Started";case"running":return"Running";case"paused":return"Paused";case"ended":return"Ended";default:return"Unknown"}},getDifficultyText(){switch(this.difficulty){case"beginner":return"Beginner";case"intermediate":return"Intermediate";case"advanced":return"Advanced";case"expert":return"Expert";default:return"Unknown"}},drawNavBeacons(e){e.fillStyle="#00ffcc",e.strokeStyle="#00ffcc",e.lineWidth=1;for(const t of this.navBeacons){e.beginPath();const n=15;e.moveTo(t.x,t.y-n),e.lineTo(t.x-n,t.y+n),e.lineTo(t.x+n,t.y+n),e.closePath(),e.stroke(),e.globalAlpha=.5,e.fill(),e.globalAlpha=1,e.font="14px monospace",e.textAlign="center",e.fillText(t.id,t.x,t.y-25),e.textAlign="start"}},checkNearRunwayEntrance(e,t){const n=[{x:830,y:770,id:"36L",direction:0,type:"south",radius:50},{x:970,y:770,id:"36R",direction:0,type:"south",radius:50},{x:830,y:430,id:"18R",direction:180,type:"north",radius:50},{x:970,y:430,id:"18L",direction:180,type:"north",radius:50}];for(const i of n){const s=Math.sqrt(Math.pow(e-i.x,2)+Math.pow(t-i.y,2));if(s<=i.radius)return console.log(`检测到接近跑道入口: ${i.id}, 距离=${s.toFixed(1)}px`),{isNear:!0,info:i}}return{isNear:!1}},drawApproachPath(e,t,n,i,s,r,o,l){try{e.beginPath(),e.moveTo(t,n);const a={x:t,y:n},c={x:i,y:s},u=o*Math.PI/180,h=(o+180)%360*Math.PI/180,m=c.x+Math.sin(h)*2e3,p=c.y-Math.cos(h)*2e3,P={x:m,y:p},S=100,$=c.x+Math.sin(h)*S,I=c.y-Math.cos(h)*S,D={x:$,y:I},E={x:D.x-a.x,y:D.y-a.y},_=Math.sqrt(E.x*E.x+E.y*E.y),V=r*Math.PI/180,J={x:Math.sin(V),y:-Math.cos(V)},ee=Math.atan2(J.y,J.x);let le=Math.atan2(-E.y,E.x)-ee;for(;le>Math.PI;)le-=2*Math.PI;for(;le<-Math.PI;)le+=2*Math.PI;const te=Math.min(_*.4,200+Math.abs(le)*100),xe=Math.max(te,_*.2),De=a.x+J.x*xe,$e=a.y+J.y*xe,Ve=De+J.x*te*.8,qe=$e+J.y*te*.8,Z=S*1.4,G=c.x+Math.sin(h)*Z,B=c.y-Math.cos(h)*Z,be={x:Math.sin(h),y:-Math.cos(h)},Oe=G+be.x*te*.8,ye=B+be.y*te*.8;console.log(`绘制航迹 - 角度差: ${(le*180/Math.PI).toFixed(1)}度, 转弯半径: ${te.toFixed(1)}像素`),e.lineTo(De,$e),e.bezierCurveTo(Ve,qe,Oe,ye,G,B),e.lineTo(D.x,D.y),e.lineTo(c.x,c.y),e.setLineDash([5,5]),e.strokeStyle="#00ffcc",e.lineWidth=1.5,e.stroke(),e.setLineDash([]);const H=.5,Ht=Math.pow(1-H,3)*De+3*Math.pow(1-H,2)*H*Ve+3*(1-H)*Math.pow(H,2)*Oe+Math.pow(H,3)*G,dn=Math.pow(1-H,3)*$e+3*Math.pow(1-H,2)*H*qe+3*(1-H)*Math.pow(H,2)*ye+Math.pow(H,3)*B,mt=-3*Math.pow(1-H,2)*De+3*(Math.pow(1-H,2)-2*(1-H)*H)*Ve+3*(2*(1-H)*H-Math.pow(H,2))*Oe+3*Math.pow(H,2)*G,Ee=-3*Math.pow(1-H,2)*$e+3*(Math.pow(1-H,2)-2*(1-H)*H)*qe+3*(2*(1-H)*H-Math.pow(H,2))*ye+3*Math.pow(H,2)*B,ze=Math.sqrt(mt*mt+Ee*Ee),yt=mt/ze,Nt=Ee/ze;return this.drawArrowHead(e,Ht,dn,yt,Nt,10),this.drawArrowHead(e,D.x,D.y,Math.sin(u),-Math.cos(u),10),e.setLineDash([]),{controlPoints:[{x:Ve,y:qe},{x:Oe,y:ye}],preApproachPoint:{x:G,y:B},finalApproachPoint:{x:$,y:I},curveLength:Math.sqrt(Math.pow(G-t,2)+Math.pow(B-n,2))*1.3}}catch(a){return console.error("绘制进场路径时出错:",a),{controlPoints:[{x:t+100,y:n},{x:i-100,y:s}],preApproachPoint:{x:i,y:s},finalApproachPoint:{x:i,y:s},curveLength:500}}},drawArrowHead(e,t,n,i,s,r){e.save(),e.fillStyle="#00ffcc",e.beginPath();const o=-s,l=i,a=t,c=n,u=t-r*i+r*.5*o,h=n-r*s+r*.5*l,m=t-r*i-r*.5*o,p=n-r*s-r*.5*l;e.moveTo(a,c),e.lineTo(u,h),e.lineTo(m,p),e.closePath(),e.fill(),e.restore()},updateApproachFlight(e){try{if(!e||!e.approachPath)return!1;if(e.newCommandIssued)return console.log(`${e.id} 在最终进场过程中收到新命令，取消进场`),this.resetApproachOrLandingState(e),!0;if(e._updatingApproach)return!0;e._updatingApproach=!0;const t=e.approachPath;if(!t.bezierPoints||!t.phase)return console.error(`${e.id} 进场路径数据不完整`),e._updatingApproach=!1,!1;const n=Date.now(),i=Math.min((n-(t.lastUpdateTime||n))/1e3,.1);t.lastUpdateTime=n;const s=t.originalSpeed||.2*this.speedLevel;try{switch(t.phase){case"INITIAL":if(t.curveLength||(t.curveLength=500,t.totalDistance=0,t.speedFactor=1),e.speed=s*t.speedFactor,t.totalDistance=(t.totalDistance||0)+e.speed*i*60,t.progressT=Math.min(t.totalDistance/t.curveLength,1),t.progressT>=1)return t.progressT=1,t.phase="FINAL_APPROACH",t.distanceToRunway=Math.sqrt(Math.pow(t.runwayX-e.x,2)+Math.pow(t.runwayY-e.y,2)),t.initialDistanceToRunway=t.distanceToRunway,t.speedFactor=Math.min(t.speedFactor,1),console.log(`${e.id} 进入最终进场阶段，距离跑道${Math.round(t.distanceToRunway)}像素，速度系数${t.speedFactor.toFixed(2)}, 当前速度${e.speed.toFixed(2)}`),e._updatingApproach=!1,!0;this.updatePlaneBezierPosition(e,t.progressT);break;case"FINAL_APPROACH":const r=t.runwayX-e.x,o=t.runwayY-e.y,l=Math.sqrt(r*r+o*o);if(t.distanceToRunway=l,t.initialDistanceToRunway>0){const c=Math.min(1,l/t.initialDistanceToRunway),u=c*c*c;t.speedFactor=.6+.4*u}else t.speedFactor=.8;e.speed=s*t.speedFactor,e.heading=t.finalHeading,e.targetHeading=t.finalHeading;const a=t.finalHeading*Math.PI/180;if(e.x+=Math.sin(a)*e.speed,e.y+=-Math.cos(a)*e.speed,Math.random()<.01&&console.log(`${e.id} 最终进场中，距离跑道${Math.round(l)}像素，速度系数${t.speedFactor.toFixed(2)}, 速度${e.speed.toFixed(2)}`),l<20){e.state="LANDING",e.x=t.runwayX,e.y=t.runwayY,e.runway=e.landingRunway,e.landingStartTime=Date.now(),e.originalSpeed=e.speed;const c=.4*this.speedLevel;e.originalSpeed>c&&(console.log(`${e.id} 降落速度过高(${e.originalSpeed.toFixed(2)})，调整为${c.toFixed(2)}`),e.originalSpeed=c),e.landingDirection=e.landingRunway.startsWith("18")?180:0;const u=`${e.id}, landing runway ${e.landingRunway}`;this.addToCommunicationLog(u),console.log(`${e.id} 到达跑道入口，开始着陆，最终速度系数${t.speedFactor.toFixed(2)}, 着陆速度${e.speed.toFixed(2)}`),e.targetRunwayX=void 0,e.targetRunwayY=void 0}break;default:return console.warn(`${e.id} 未知的进场阶段: ${t.phase}`),e._updatingApproach=!1,!1}}catch(r){console.error(`处理${e.id}的${t.phase}阶段时出错:`,r),this.moveTowardsRunway(e)}return e._updatingApproach=!1,!0}catch(t){return console.error("updateApproachFlight严重错误:",t),e&&(e._updatingApproach=!1,e.state="APPROACH",e.approachPath=null),!1}},updatePlaneBezierPosition(e,t){try{const n=e.approachPath;if(!n||!n.bezierPoints)return;const i=n.bezierPoints.start,s=n.bezierPoints.cp1,r=n.bezierPoints.cp2,o=n.bezierPoints.preApproach,l=1-t,a=l*l,c=a*l,u=t*t,h=u*t,m=c*i.x+3*a*t*s.x+3*l*u*r.x+h*o.x,p=c*i.y+3*a*t*s.y+3*l*u*r.y+h*o.y;if(!isNaN(m)&&!isNaN(p)){e.x=m,e.y=p;const P=3*a*(s.x-i.x)+6*l*t*(r.x-s.x)+3*u*(o.x-r.x),S=3*a*(s.y-i.y)+6*l*t*(r.y-s.y)+3*u*(o.y-r.y);if(P!==0||S!==0){let $=Math.atan2(P,-S)*180/Math.PI;$<0&&($+=360),e.heading=Math.round($),e.targetHeading=e.heading}}else this.moveTowardsRunway(e)}catch(n){console.error("计算贝塞尔位置时出错:",n),this.moveTowardsRunway(e)}},moveTowardsRunway(e){try{if(!e||!e.approachPath)return;const t=e.approachPath,n=t.originalSpeed||e.speed||.5,i=t.runwayX-e.x,s=t.runwayY-e.y,r=Math.sqrt(i*i+s*s);if(r>0){e.x+=i/r*n,e.y+=s/r*n;let o=Math.atan2(i,-s)*180/Math.PI;o<0&&(o+=360),e.heading=Math.round(o),e.targetHeading=e.heading}}catch(t){console.error("备用移动方法出错:",t)}},isAircraftOffRunway(e){const t=e.x,n=e.y,i=t>=800&&t<=860||t>=940&&t<=1e3,s=n>=430&&n<=770,r=e.heading,o=r>=330||r<=30,l=r>=150&&r<=210,a=380,c=820;let u=!0;return i&&(o?(u=n<a,u||console.log(`${e.id} 北向起飞中，尚未离开跑道安全区域 (y=${n.toFixed(1)}, 需小于${a})`)):l?(u=n>c,u||console.log(`${e.id} 南向起飞中，尚未离开跑道安全区域 (y=${n.toFixed(1)}, 需大于${c})`)):u=!s),u&&i&&console.log(`${e.id} 已离开跑道安全区域，可以接受指令`),u},initSpeechRecognition(){if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){console.error("Browser does not support speech recognition");return}if(this.recognition)try{this.recognition.onresult=null,this.recognition.onerror=null,this.recognition.onend=null,this.recognition.abort()}catch{}const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.maxAlternatives=5,this.recognition.onresult=t=>{const n=t.results[t.results.length-1];let i="",s=0;for(let o=0;o<n.length;o++){const l=n[o].transcript.trim();let c=n[o].confidence;(/\b(b|bravo)\s*\d{4}\b/i.test(l)||/\b\d{4}\b/i.test(l))&&(c+=.2);const u=["heading","turn","left","right","runway","cleared","land","takeoff"];for(const h of u)l.toLowerCase().includes(h)&&(c+=.05);c>s&&(s=c,i=l)}let r=i;if(r=r.replace(/\bbravo\b/gi,"B"),this.voiceCommandText=r,n.isFinal&&r.trim()!==""&&(console.log("Speech recognition result:",i,"confidence:",s),this.processVoiceCommand(r),this.continuousMode&&this.isRecording))try{this.recognition.stop(),setTimeout(()=>{if(this.isRecording&&this.continuousMode)try{this.recognition.start()}catch(o){console.error("Failed to restart continuous recognition:",o)}},100)}catch(o){console.error("Error restarting continuous recognition:",o)}},this.recognition.onerror=t=>{if(console.error("Speech recognition error:",t.error),t.error==="no-speech"&&this.continuousMode){console.log("No speech detected, but continuing in continuous mode");return}this.isRecording=!1},this.recognition.onend=()=>{if(console.log("Speech recognition ended"),this.continuousMode&&this.isRecording){console.log("Restarting recognition in continuous mode");try{setTimeout(()=>{if(this.isRecording&&this.continuousMode)try{this.recognition.start()}catch(t){console.error("Failed to restart continuous recognition:",t),this.isRecording=!1}},100)}catch(t){console.error("Error in continuous recognition:",t),this.isRecording=!1}}else this.voiceCommandText&&this.voiceCommandText.trim()!==""&&!this.continuousMode&&this.processVoiceCommand(this.voiceCommandText),this.continuousMode||(this.isRecording=!1),this.continuousMode||setTimeout(()=>{this.voiceCommandText=""},5e3)}},startVoiceCommand(e=!1){if(!this.recognition||this.gameStatus!=="running"||this.isRecording)return;const t=Date.now();if(!(t-this.lastVoiceCommandTime<500)){this.lastVoiceCommandTime=t,console.log("Starting recording..."),this.isRecording=!0,this.voiceCommandText="",this.continuousMode=e;try{try{this.recognition.stop()}catch{}this.initSpeechRecognition(),this.voiceRecognitionTimeout=setTimeout(()=>{try{this.recognition.start()}catch(n){console.error("语音识别启动失败:",n),this.isRecording=!1}},150)}catch(n){console.error("Failed to start speech recognition:",n),this.isRecording=!1}}},stopVoiceCommand(){if(this.isRecording){console.log("停止录音..."),this.voiceRecognitionTimeout&&(clearTimeout(this.voiceRecognitionTimeout),this.voiceRecognitionTimeout=null);try{this.recognition.stop()}catch(e){console.error("语音识别停止失败:",e)}this.isRecording=!1,this.continuousMode=!1}},processVoiceCommand(e){if(!e||this.gameStatus!=="running")return;const t=Date.now();if(t-this.lastVoiceCommandProcessTime<300){console.log("命令处理过于频繁，忽略此次命令");return}this.lastVoiceCommandProcessTime=t,console.log("Received voice command:",e);try{let n=e.toLowerCase().trim();const i=k?{"bravo ":"b",heading:"heading","turn left":"turn left","turn right":"turn right",takeoff:"take off","cleared for takeoff":"take off","cleared to land":"land",runway:"runway"}:{比:"b",航向:"航向",左转:"左转",右转:"右转",起飞:"起飞",着陆:"着陆",跑道:"跑道"};for(const[p,P]of Object.entries(i))n=n.replace(new RegExp(p,"gi"),P);const s=n;let r=null,o=s;const l=/\b(\d{4})\b/g,a=[...s.matchAll(l)];if(a.length>0){const p=a[0][1];console.log("Identified 4-digit number:",p);const P=this.airplanes.filter(S=>{const $=S.id.replace(/\D/g,"");return $.endsWith(p)||$===p});P.length>0?(r=P[0].id,console.log(`Found matching flight: ${r}, by number: ${p}`)):(r="B"+p,console.log(`Constructed flight ID: ${r}`))}if(!r&&this.selectedPlane&&(r=this.selectedPlane.id,console.log(`使用当前选中的飞机: ${r}`)),!r){this.addToCommunicationLog("No target aircraft specified, please select an aircraft or include a flight number in your command");return}const c=this.getPlaneById(r);if(!c){this.addToCommunicationLog(k?`Flight ${r} not found`:`Flight ${r} not found`);return}c.selected||this.selectPlane(c),o=s.replace(new RegExp(`\\b${r}\\b`,"i"),"").trim(),console.log(`分离出指令部分: "${o}"`);const u=k?o.includes("land")||o.includes("landing"):o.includes("着陆")||o.includes("落地");if(c.state==="FINAL_APPROACH"&&!u&&(console.log(`${r} is in final approach, received non-landing command "${o}", canceling landing command`),c.newCommandIssued=!0,this.addToCommunicationLog(k?`${r}, landing approach canceled`:`${r}, landing approach canceled`)),console.log(`分析指令: "${o}"`),k)if(o.includes("take off")){const p=o.match(/runway\s+(\d+)\s*([lr])/i);let P=null;p&&(P=p[1]+p[2].toUpperCase()),console.log("Identified as takeoff command"+(P?`, runway ${P}`:""));const S=this.getPlaneById(r);S&&(S.newCommandIssued=!0),S.newCommandIssued=!0,this.processTakeoffCommand(r,o)}else console.warn(`起飞指令目标飞机 ${r} 不存在`),this.addToCommunicationLog(k?`Aircraft ${r} not found`:`Aircraft ${r} not found`);if(k&&o.includes("land")||!k&&o.includes("着陆")){console.log("Identified as landing command");const p=this.getPlaneById(r);p?(p.newCommandIssued=!0,this.processLandingCommand(r,o)):(console.warn(`着陆指令目标飞机 ${r} 不存在`),this.addToCommunicationLog(k?`Aircraft ${r} not found`:`Aircraft ${r} not found`));return}let h=!1,m=null;if(k&&(o.includes("turn left")?(m="left",h=!0):o.includes("turn right")?(m="right",h=!0):o.includes("heading")&&(h=!0)),h){const p=o.match(/\b(\d{1,3})\b/);if(p){const P=parseInt(p[1]);if(P>=0&&P<=360){console.log(`Identified as heading command: ${P}°, turn direction: ${m||"auto"}`);const S=this.getPlaneById(r);S?(S.newCommandIssued=!0,this.processHeadingCommand(r,o)):(console.warn(`航向指令目标飞机 ${r} 不存在`),this.addToCommunicationLog(k?`Aircraft ${r} not found`:`Aircraft ${r} not found`));return}}}this.addToCommunicationLog('Command not recognized. Use standard ATC phrases like "turn heading 180" or "cleared to land runway 36L"')}catch(n){console.error("Error processing voice command::",n),this.addToCommunicationLog("Error processing voice command");return}},processHeadingCommand(e,t){console.log(`处理航向指令: "${t}" 对 ${e}`);try{const n=this.getPlaneById(e);if(!n){this.addToCommunicationLog(k?`${e} not found`:`${e} not found`);return}n.state==="FINAL_APPROACH"&&(console.log(`${e} is in final approach, canceling landing command and returning to normal flight state`),n.newCommandIssued=!0,n.state="APPROACH",n.approachPath=null,n.approachPathCreated=!1,n.landingRunway=null,this.addToCommunicationLog(k?`${e}, landing approach canceled`:`${e}，取消进场着陆`));let i=null,s=null;if(k){const o=t.match(/turn\s+left\s+heading\s+(\d{1,3})/i),l=t.match(/turn\s+right\s+heading\s+(\d{1,3})/i),a=t.match(/heading\s+(\d{1,3})/i);o?(i=parseInt(o[1]),s="left"):l?(i=parseInt(l[1]),s="right"):a&&(i=parseInt(a[1]))}if(i===null)if(t.includes("left")||t.includes("左转"))s="left",i=(n.heading-30+360)%360;else if(t.includes("right")||t.includes("右转"))s="right",i=(n.heading+30)%360;else{this.addToCommunicationLog('Invalid heading command format. Please use "turn heading XXX" or "turn left/right heading XXX"');return}if(i=Math.max(0,Math.min(359,i)),!s){const o=(i-n.heading+360)%360,l=(n.heading-i+360)%360;s=o<=l?"right":"left"}this.resetApproachOrLandingState(n),n.targetHeading=i,n.state=n.state==="HOLDING"?"HOLDING":"FLYING";const r=k?`${e}, turn ${s} heading ${i}`:`${e}, ${s==="left"?"左":"右"}转航向${i}`;this.speak(r),console.log(`航向命令已接受: ${e} 转向 ${i}° (${s})`)}catch(n){console.error("Error processing heading command::",n),this.addToCommunicationLog(`Error processing heading command for ${e}`)}},processLandingCommand(e,t){console.log(`处理着陆指令: "${t}" 对 ${e}`);try{const n=this.getPlaneById(e);if(!n){this.addToCommunicationLog(k?`${e} not found`:`${e} 未找到`);return}if(n.state!=="FLYING"&&n.state!=="APPROACH"&&n.state!=="FINAL_APPROACH"){this.addToCommunicationLog(k?`${e} cannot execute landing command in current state`:`${e} cannot execute landing command in current state`);return}let i=null;if(k){const a=t.match(/runway\s+(\d{2})([LRCrlc]?)/i);a&&(i=a[1]+(a[2]?a[2].toUpperCase():""))}if(!i){this.addToCommunicationLog(k?`${e}, please specify runway for landing (e.g. "land runway 36L")`:`${e}，请指定着陆跑道（例如"着陆跑道36左"）`);return}const s=this.runways.find(a=>a.id===i);if(!s){this.addToCommunicationLog(k?`Runway ${i} not found`:`跑道${i}未找到`);return}console.log(`处理${e}向跑道${i}的着陆请求`);const r=this.getRunwayEntrance(s);if(!r){console.error(`Unable to find entrance coordinates for runway ${i}`);return}n.state="APPROACH",n.landingRunway=i;const o=r.x,l=r.y;try{if(this.checkNearRunwayEntrance(n,i)){console.log(`${e}已在跑道${i}入口附近，直接设置为最终进场状态`),n.state="FINAL_APPROACH",n.targetHeading=s.heading;const c=k?`${e}, cleared to land runway ${i}`:`${e}，着陆跑道${i}`;this.speak(c)}else{this.createApproachPath(n,s);const c=k?`${e}, cleared to land runway ${i}`:`${e}，着陆跑道${i}`;this.speak(c)}}catch(a){console.error("创建进场路径时出错:",a),this.addToCommunicationLog(k?`Error processing landing command for ${e}`:`Error processing landing command for ${e}`)}}catch(n){console.error("处理着陆指令时出错:",n),this.addToCommunicationLog(`Error processing landing command for ${e}`)}},getRunwayEntrance(e){return e.heading===0?{x:e.startX,y:e.startY-50}:e.heading===180?{x:e.startX,y:e.startY+50}:null},createApproachPath(e,t){const n=this.getRunwayEntrance(t),i=e.x,s=e.y,r=n.x,o=n.y,l=r-i,a=o-s,c=Math.sqrt(l*l+a*a),u=e.heading*Math.PI/180,h=i+Math.sin(u)*c*.3,m=s-Math.cos(u)*c*.3,p=t.heading*Math.PI/180,P=r-Math.sin(p)*150,S=o+Math.cos(p)*150;e.approachPath={start:{x:i,y:s},control1:{x:h,y:m},control2:{x:P,y:S},end:{x:r,y:o}},e.state="APPROACH",e.approachPathCreated=!0,console.log(`已为${e.id}创建到跑道${t.id}的进场路径`)},processTakeoffCommand(e,t){console.log(`处理起飞指令: "${t}" 对 ${e}`);try{const n=this.getPlaneById(e);if(!n){this.addToCommunicationLog(k?`${e} not found`:`${e} 未找到`);return}n.state==="FINAL_APPROACH"&&(console.log(`${e} 正在进场落地，取消落地指令并恢复到正常航行状态`),n.newCommandIssued=!0,n.state="APPROACH",n.approachPath=null,n.approachPathCreated=!1,n.landingRunway=null,this.addToCommunicationLog(k?`${e}, landing approach canceled`:`${e}，取消进场着陆`));let i=null;if(k){const s=t.match(/runway\s+(\d{2})([LRCrlc]?)/i);s&&(i=s[1]+(s[2]?s[2].toUpperCase():""))}if(console.log("提取的跑道号:",i),!i&&n.state==="READY_FOR_TAKEOFF"&&(i=n.runway,console.log(`飞机已在跑道${i}上，准备起飞`)),i){const s=this.runways.find(l=>l.id===i);if(!s){this.addToCommunicationLog(k?`Runway ${i} not found`:`跑道${i}未找到`);return}console.log(`将${e}移动到跑道${i}起飞位置`);const r=n.state==="READY_FOR_TAKEOFF";n.x=s.startX,n.y=s.startY,n.heading=s.heading,n.targetHeading=s.heading,n.state="READY_FOR_TAKEOFF",n.runway=s.id,r||(delete n.queuePosition,this.updateTakeoffQueue());const o=k?`${e}, cleared for takeoff runway ${i}`:`${e}，起飞跑道${i}`;this.speak(o);return}if(n.state==="READY_FOR_TAKEOFF"){console.log(`${e}开始起飞，无需指定跑道（已在跑道上）`),n.state="TAKEOFF",n.speed=.2*this.speedLevel,delete n.queuePosition,this.updateTakeoffQueue();const s=k?`${e}, cleared for takeoff runway ${n.runway}`:`${e}，起飞跑道${n.runway}`;this.speak(s)}else this.addToCommunicationLog(k?`${e} not on runway. Please specify runway (e.g. "takeoff runway 36L")`:`${e}不在跑道上。请指定跑道（例如"起飞跑道36左"）`)}catch(n){console.error("处理起飞指令时出错:",n),this.addToCommunicationLog(`Error processing takeoff command for ${e}`)}},calculateApproachPath(e){try{if(!e||!e.landingRunway){console.error("Unable to calculate approach path: missing aircraft or runway information",e);return}const t={"18L":{x:970,y:430},"18R":{x:830,y:430},"36L":{x:830,y:770},"36R":{x:970,y:770}};if(!t[e.landingRunway]){console.error(`无效的跑道标识: ${e.landingRunway}`);return}const n=t[e.landingRunway],i=n.x,s=n.y,r=e.landingRunway.startsWith("18")?180:0,o=e.x,l=e.y,a=Math.round(e.heading)%360,c=i-o,u=s-l,h=Math.sqrt(c*c+u*u),m=(r-a+360)%360,p=(a-r+360)%360,P=m<=p,S=P?"right":"left";this.dragLine={startX:o,startY:l,endX:i,endY:s,startHeading:a,finalHeading:r,shouldTurnClockwise:P,landingApproach:!0,runwayEntrance:n,runwayId:e.landingRunway};const $=r*Math.PI/180,I=(r+180)%360*Math.PI/180,D=100,E=i+Math.sin(I)*D,_=s-Math.cos(I)*D,V=a*Math.PI/180,J=Math.min(h*.3,150),ee=o+Math.sin(V)*J,me=l-Math.cos(V)*J,le=Math.min(h*.3,150),te=E+Math.sin(I)*le,xe=_-Math.cos(I)*le;e.approachPath={startX:o,startY:l,runwayX:i,runwayY:s,startHeading:a,finalHeading:r,bezierPoints:{start:{x:o,y:l},cp1:{x:ee,y:me},cp2:{x:te,y:xe},preApproach:{x:E,y:_}},phase:"INITIAL",progressT:0,lastUpdateTime:Date.now(),originalSpeed:e.speed,speedFactor:1,curveLength:this.calculateBezierLength({x:o,y:l},{x:ee,y:me},{x:te,y:xe},{x:E,y:_})},e.approachPathCreated=!0,e.newCommandIssued=!1,setTimeout(()=>{this.dragLine&&this.dragLine.landingApproach&&(this.dragLine=null)},3e3),this.addToCommunicationLog(`${e.id} starting approach, runway ${e.landingRunway}`),console.log(`${e.id} approach path calculated [runway=${e.landingRunway}, heading=${r}°]`)}catch(t){console.error("计算进场路径时出错:",t)}},findClickedPlane(e,t){return this.airplanes.find(i=>Math.sqrt(Math.pow(i.x-e,2)+Math.pow(i.y-t,2))<30)},handleKeyDown(e){e.code==="Space"&&this.gameStatus==="running"&&!this.spacePressHandled&&(e.preventDefault(),this.spacePressHandled=!0,this.startVoiceCommand())},handleKeyUp(e){e.code==="Space"&&this.isRecording&&(e.preventDefault(),this.spacePressHandled=!1,this.stopVoiceCommand())},onKeyDown(e){e.keyCode===16&&e.location===1&&(this.shiftKeyPressed||(this.shiftKeyPressed=!0,this.startVoiceCommand(!0)),e.preventDefault())},onKeyUp(e){e.keyCode===16&&e.location===1&&(this.shiftKeyPressed=!1,this.stopVoiceCommand(),e.preventDefault())},evaluateBezierCurve(e,t,n,i,s){try{if(e<0||e>1||!t||!n||!i||!s)return console.error("贝塞尔曲线参数错误",{t:e,p0:t,p1:n,p2:i,p3:s}),null;const r=1-e,o=r*r,l=o*r,a=e*e,c=a*e;return{x:l*t.x+3*o*e*n.x+3*r*a*i.x+c*s.x,y:l*t.y+3*o*e*n.y+3*r*a*i.y+c*s.y}}catch(r){return console.error("贝塞尔曲线计算错误",r),{x:t.x,y:t.y}}},evaluateBezierTangent(e,t,n,i,s){try{if(e<0||e>1||!t||!n||!i||!s)return console.error("贝塞尔切线参数错误",{t:e,p0:t,p1:n,p2:i,p3:s}),{x:1,y:0};const r=1-e,o=r*r,l=e*e,a=3*o*(n.x-t.x)+6*r*e*(i.x-n.x)+3*l*(s.x-i.x),c=3*o*(n.y-t.y)+6*r*e*(i.y-n.y)+3*l*(s.y-i.y),u=Math.sqrt(a*a+c*c);return u<1e-4?{x:1,y:0}:{x:a/u,y:c/u}}catch(r){return console.error("贝塞尔切线计算错误",r),{x:1,y:0}}},calculateBezierLength(e,t,n,i){try{if(!e||!t||!n||!i)return console.error("贝塞尔长度计算参数错误",{p0:e,p1:t,p2:n,p3:i}),300;const s=20;let r=0,o=e;for(let l=1;l<=s;l++){const a=l/s,c=this.evaluateBezierCurve(a,e,t,n,i);if(c){const u=c.x-o.x,h=c.y-o.y;r+=Math.sqrt(u*u+h*h),o=c}}return r*1.1}catch(s){return console.error("计算贝塞尔曲线长度错误",s),300}},getChineseDifficulty(){return{easy:"简单",medium:"中等",hard:"困难"}[this.difficulty]||"未知"},checkAndSpawnNewAircraft(){this.gameStatus==="running"&&(console.log(`检查飞机数量: 当前 ${this.airplanes.length}/${this.dynamicMaxAircraftCount}`),this.airplanes.length<this.dynamicMaxAircraftCount&&((Math.random()<.7?"approach":"departure")==="approach"?this.spawnApproach():this.spawnDeparture(),console.log(`当前飞机数量(${this.airplanes.length})低于最大限制(${this.dynamicMaxAircraftCount})，生成新飞机`)))},resetApproachOrLandingState(e){return e&&(e.state==="FINAL_APPROACH"||e.state==="LANDING")?(console.log(`${e.id} 正在${e.state==="FINAL_APPROACH"?"进场":"着陆"}，但收到新命令，将其状态重置为FLYING`),e.state="FLYING",e.speed=.2*this.speedLevel,e.approachPath=null,e.approachPathCreated=!1,e.landingRunway=null,e.targetRunwayX=void 0,e.targetRunwayY=void 0,e.runway=null,!0):!1},updateGameProgress(){if(this.gameStatus!=="running")return;const e=(Date.now()-this.gameStartTime)/6e4,t=Math.min(Math.floor(e/5),10);if(t!==this.gameProgressLevel){this.gameProgressLevel=t,console.log(`游戏进度提升到 ${this.gameProgressLevel} 级`);const n=Math.floor(this.gameProgressLevel/2);this.dynamicMaxAircraftCount=this.maxAircraftCount[this.difficulty]+n,n>0&&this.addToCommunicationLog(`Air traffic increasing. Max aircraft: ${this.dynamicMaxAircraftCount}`)}},checkGamePhase(){if(this.gameStatus!=="running")return;const e=Date.now(),t=this.difficultySettings[this.difficulty];if(this.gamePhase==="normal"){const n=t.busyPhaseProbability+this.gameProgressLevel*.02;if(Math.random()<n){this.gamePhase="busy",this.gamePhaseStartTime=e,this.currentSpawnInterval=t.busySpawnInterval-this.gameProgressLevel*300,this.dynamicMaxAircraftCount+=1,console.log(`进入繁忙阶段，生成间隔减少到 ${this.currentSpawnInterval}ms，最大飞机数增加到 ${this.dynamicMaxAircraftCount}`),this.addToCommunicationLog("Traffic is getting busy. Prepare for increased workload."),clearInterval(this.spawnApproachInterval),this.spawnApproachInterval=setInterval(()=>{this.checkGamePhase(),(Math.random()<.7?"approach":"departure")==="approach"?this.spawnApproach():this.spawnDeparture()},this.currentSpawnInterval);const i=3e4+Math.random()*3e4;this.phaseChangeTimeout=setTimeout(()=>{this.gameStatus==="running"&&this.gamePhase==="busy"&&(Math.random()<.3?this.enterCalmPhase():this.enterNormalPhase())},i)}}else if(this.gamePhase==="calm"){const n=t.calmPhaseDuration-this.gameProgressLevel*2e3;e-this.gamePhaseStartTime>n&&this.enterNormalPhase()}},enterNormalPhase(){this.gamePhase="normal",this.gamePhaseStartTime=Date.now();const e=this.difficultySettings[this.difficulty];this.currentSpawnInterval=e.baseSpawnInterval-this.gameProgressLevel*400,this.dynamicMaxAircraftCount=this.maxAircraftCount[this.difficulty]+Math.floor(this.gameProgressLevel/2),console.log(`返回正常阶段，生成间隔设为 ${this.currentSpawnInterval}ms，最大飞机数设为 ${this.dynamicMaxAircraftCount}`),this.addToCommunicationLog("Traffic returning to normal levels."),clearInterval(this.spawnApproachInterval),this.spawnApproachInterval=setInterval(()=>{this.checkGamePhase(),(Math.random()<.7?"approach":"departure")==="approach"?this.spawnApproach():this.spawnDeparture()},this.currentSpawnInterval),this.phaseChangeTimeout&&(clearTimeout(this.phaseChangeTimeout),this.phaseChangeTimeout=null)},enterCalmPhase(){this.gamePhase="calm",this.gamePhaseStartTime=Date.now();const e=this.difficultySettings[this.difficulty];this.currentSpawnInterval=e.calmSpawnInterval,this.dynamicMaxAircraftCount=Math.max(2,this.maxAircraftCount[this.difficulty]-1+Math.floor(this.gameProgressLevel/3)),console.log(`进入平静阶段，生成间隔增加到 ${this.currentSpawnInterval}ms，最大飞机数减少到 ${this.dynamicMaxAircraftCount}`),this.addToCommunicationLog("Traffic is calming down. Take a brief respite."),clearInterval(this.spawnApproachInterval),this.spawnApproachInterval=setInterval(()=>{this.checkGamePhase(),(Math.random()<.7?"approach":"departure")==="approach"?this.spawnApproach():this.spawnDeparture()},this.currentSpawnInterval),this.phaseChangeTimeout&&(clearTimeout(this.phaseChangeTimeout),this.phaseChangeTimeout=null)},checkCollisions(){for(let e=0;e<this.airplanes.length;e++){const t=this.airplanes[e];if(!(this.problemAircraft.includes(t)||this.problemAircraft.includes(t.id)||t===this.dragFollowing||t.state==="READY_FOR_TAKEOFF"))for(let n=e+1;n<this.airplanes.length;n++){const i=this.airplanes[n];if(this.problemAircraft.includes(i)||this.problemAircraft.includes(i.id)||i===this.dragFollowing||i.state==="READY_FOR_TAKEOFF")continue;const s=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));if(s<this.safetyDistance){console.log(`检测到碰撞: ${t.id}(${t.state}) 与 ${i.id}(${i.state}) 距离=${s}`),this.problemAircraft=[t,i];const r=this.getLocationDescription(t,i);return this.triggerGameOver("COLLISION",`${t.id}(${t.state}) collided with ${i.id}(${i.state}) ${r}`),!0}}}return!1},getLocationDescription(e,t){return(e.state==="LANDING"||e.state==="TAKEOFF"||e.state==="LANDED")&&(t.state==="LANDING"||t.state==="TAKEOFF"||t.state==="LANDED")?"on runway":e.runway||t.runway?"near runway":"in airspace"},checkAircraftOutOfBounds(){if(this.isGameOver)return;const e=this.airplanes.filter(t=>t.state==="FLYING"||t.state==="APPROACH"||t.state==="FINAL_APPROACH"||t.state==="TAKEOFF"||t.state==="LANDING");for(const t of e)if(t.x<this.radarBounds.minX||t.x>this.radarBounds.maxX||t.y<this.radarBounds.minY||t.y>this.radarBounds.maxY){this.problemAircraft=[t],this.triggerGameOver("OUT_OF_BOUNDS",`RADAR CONTACT LOST: ${t.id} has exited controlled airspace`);return}},checkGroundDelays(){if(this.isGameOver)return;const e=Date.now(),t=this.airplanes.filter(n=>n.state==="READY_FOR_TAKEOFF");for(const n of t){const i=this.groundWaitingStartTimes[n.id];if(i&&e-i>this.groundWaitTimeout){this.problemAircraft=[n],this.triggerGameOver("GROUND_DELAY",`GROUND DELAY: ${n.id} exceeded maximum waiting time`);return}}},triggerGameOver(e,t){this.isGameOver||(this.isGameOver=!0,this.gameOverReason=e,this.gameOverMessage=t,this.addToCommunicationLog(t),this.addToCommunicationLog("GAME OVER"),this.startProblemAircraftBlinking(),this.gameStatus="ended",this.clearAllGameTimers(),this.playGameOverSound(e),console.log("游戏结束:",e,t))},startProblemAircraftBlinking(){this.blinkTimer&&clearInterval(this.blinkTimer),this.blinkTimer=setInterval(()=>{this.isBlinking=!this.isBlinking},500)},playGameOverSound(e){switch(e){case"COLLISION":this.speak("Collision alert! Collision alert!");break;case"OUT_OF_BOUNDS":this.speak("Radar contact lost!");break;case"GROUND_DELAY":this.speak("Ground delay timeout!");break}},clearAllGameTimers(){this.spawnApproachInterval&&(clearInterval(this.spawnApproachInterval),this.spawnApproachInterval=null),this.spawnDepartureInterval&&(clearInterval(this.spawnDepartureInterval),this.spawnDepartureInterval=null),this.gameProgressInterval&&(clearInterval(this.gameProgressInterval),this.gameProgressInterval=null),this.phaseChangeTimeout&&(clearTimeout(this.phaseChangeTimeout),this.phaseChangeTimeout=null)},drawGameOver(e){e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,1800,1200),e.fillStyle="#FF0000",e.font="bold 80px Arial",e.textAlign="center",e.fillText("GAME OVER",900,400),e.fillStyle="#FFFFFF",e.font="bold 40px Arial",e.fillText(`FINAL SCORE: ${this.score}`,900,500),e.fillStyle="#FF9900",e.font="30px Arial",e.fillText(this.gameOverMessage,900,580),this.drawGameOverButtons(e),e.textAlign="start"},drawGameOverButtons(e){e.fillStyle="#003366",this.drawButton(e,700,700,200,60,"RESTART"),e.fillStyle="#003366",this.drawButton(e,950,700,200,60,"MENU")},drawButton(e,t,n,i,s,r){e.fillRect(t,n,i,s),e.strokeStyle="#00ffcc",e.lineWidth=2,e.strokeRect(t,n,i,s),e.fillStyle="#FFFFFF",e.font="bold 24px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText(r,t+i/2,n+s/2),e.textBaseline="alphabetic"},isPointInRect(e,t,n,i,s,r){return e>=n&&e<=n+s&&t>=i&&t<=i+r},handleRestartButton(){console.log("重新开始游戏"),this.isGameOver=!1,this.gameOverReason="",this.gameOverMessage="",this.problemAircraft=[],this.blinkTimer&&(clearInterval(this.blinkTimer),this.blinkTimer=null),this.restartGame(),this.startGame()},handleMenuButton(){console.log("返回菜单"),this.isGameOver=!1,this.gameOverReason="",this.gameOverMessage="",this.problemAircraft=[],this.blinkTimer&&(clearInterval(this.blinkTimer),this.blinkTimer=null),this.restartGame()},arePlanesOnSameRunway(e,t){return!!(e.runway&&t.runway&&e.runway===t.runway)},updateTakeoffQueue(){const e=this.airplanes.filter(s=>s.state==="READY_FOR_TAKEOFF");e.sort((s,r)=>(s.queuePosition||0)-(r.queuePosition||0));const t=900,n=600,i=50;e.forEach((s,r)=>{s.queuePosition=r,s.x=t,s.y=n+r*i})},decreaseSpeed(){this.speedLevel=Math.max(.5,this.speedLevel-.25)},resetSpeed(){this.speedLevel=1},increaseSpeed(){this.speedLevel=Math.min(2,this.speedLevel+.25)}},watch:{speedLevel(){for(const e of this.airplanes)e.state!=="READY_FOR_TAKEOFF"&&(e.speed=.2*this.speedLevel)},difficulty(){if(this.gameStatus==="running"){clearInterval(this.spawnApproachInterval),this.spawnDepartureInterval&&clearInterval(this.spawnDepartureInterval),this.gamePhase="normal",this.dynamicMaxAircraftCount=this.maxAircraftCount[this.difficulty]+Math.floor(this.gameProgressLevel/2);const e=this.currentDifficultySettings;this.currentSpawnInterval=e.baseSpawnInterval,this.spawnApproachInterval=setInterval(()=>{this.checkGamePhase(),(Math.random()<.7?"approach":"departure")==="approach"?this.spawnApproach():this.spawnDeparture()},this.currentSpawnInterval);const t=this.getDifficultyText();this.addToCommunicationLog(`Difficulty changed to: ${t}`)}}}},pa={class:"controls-container"},ma={class:"game-controls"},ya=["disabled"],wa=["disabled"],xa=["disabled"],va={class:"difficulty-select"},Ta=["disabled"],ba={class:"speed-control"},Aa={class:"speed-display"},Pa={class:"radar-container"},Ca={class:"comm-container"},Sa={ref:"communicationLog",class:"communication-log"},_a={class:"voice-command-container"},Ma={key:0,class:"recognized-text"},Ra={key:1,class:"recording-indicator"};function La(e,t,n,i,s,r){return lt(),vt("div",{id:"app",onKeydown:t[13]||(t[13]=(...o)=>r.onKeyDown&&r.onKeyDown(...o)),onKeyup:t[14]||(t[14]=(...o)=>r.onKeyUp&&r.onKeyUp(...o)),tabindex:"0"},[j("div",pa,[j("div",ma,[j("button",{onClick:t[0]||(t[0]=(...o)=>r.startGame&&r.startGame(...o)),disabled:s.gameStatus==="running"},"Start",8,ya),j("button",{onClick:t[1]||(t[1]=(...o)=>r.pauseGame&&r.pauseGame(...o)),disabled:s.gameStatus!=="running"},"Pause",8,wa),j("button",{onClick:t[2]||(t[2]=(...o)=>r.endGame&&r.endGame(...o)),disabled:s.gameStatus==="ended"},"End",8,xa),j("div",va,[t[16]||(t[16]=j("span",null,"Difficulty:",-1)),Ir(j("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.difficulty=o),disabled:s.gameStatus==="running"},t[15]||(t[15]=[j("option",{value:"beginner"},"Beginner",-1),j("option",{value:"intermediate"},"Intermediate",-1),j("option",{value:"advanced"},"Advanced",-1),j("option",{value:"expert"},"Expert",-1)]),8,Ta),[[ra,s.difficulty]])])]),j("div",ba,[t[17]||(t[17]=j("span",null,"Speed Level:",-1)),j("button",{onClick:t[4]||(t[4]=(...o)=>r.decreaseSpeed&&r.decreaseSpeed(...o)),class:et({active:s.speedLevel<1})}," ← ",2),j("button",{onClick:t[5]||(t[5]=(...o)=>r.resetSpeed&&r.resetSpeed(...o)),class:et({active:s.speedLevel===1})}," Standard ",2),j("button",{onClick:t[6]||(t[6]=(...o)=>r.increaseSpeed&&r.increaseSpeed(...o)),class:et({active:s.speedLevel>1})}," → ",2),j("span",Aa,Vt(s.speedLevel.toFixed(2))+"x",1)])]),j("div",Pa,[j("canvas",{ref:"radarCanvas",width:"1800",height:"1200",onMousedown:t[7]||(t[7]=(...o)=>r.startDrag&&r.startDrag(...o)),onMousemove:t[8]||(t[8]=(...o)=>r.onDrag&&r.onDrag(...o)),onMouseup:t[9]||(t[9]=(...o)=>r.endDrag&&r.endDrag(...o))},null,544),j("div",Ca,[j("div",Sa,[(lt(!0),vt(Me,null,Xr(s.allCommunicationLog,(o,l)=>(lt(),vt("div",{key:l,class:"log-entry"},Vt(o),1))),128))],512),j("div",_a,[s.voiceCommandText?(lt(),vt("div",Ma,Vt(s.voiceCommandText),1)):gi("",!0),j("button",{onMousedown:t[10]||(t[10]=(...o)=>r.startVoiceCommand&&r.startVoiceCommand(...o)),onMouseup:t[11]||(t[11]=(...o)=>r.stopVoiceCommand&&r.stopVoiceCommand(...o)),onMouseleave:t[12]||(t[12]=(...o)=>r.stopVoiceCommand&&r.stopVoiceCommand(...o)),class:et([{active:s.isRecording},"voice-command-button"])}," Talk ",34),s.isRecording?(lt(),vt("div",Ra,"Recording...")):gi("",!0)])])])],32)}const Ia=ha(ga,[["render",La]]);document.addEventListener("click",()=>{ks.init()},{once:!0});la(Ia).mount("#app");
